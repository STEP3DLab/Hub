<!DOCTYPE html>
<html lang="ru" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="description" content="CAD/CAE, реверсивный инжиниринг, 3D‑сканирование, аддитивное производство. Курсы ДПО, проекты, услуги технопарка РГСУ." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><rect x='6' y='6' width='52' height='52' rx='12' fill='%230ea5e9'/><path d='M20 44V20l12-6 12 6v24l-12 6-12-6z M32 14v36' stroke='%23fff' stroke-width='2' fill='none'/></svg>">
  <link rel="stylesheet" href="styles/site.css">
  <!-- Tailwind (CDN, удобно для GitHub Pages). Для продакшна соберите локально. -->
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    // Доп. токены Tailwind
    tailwind.config = { theme: { extend: { boxShadow: { soft: '0 6px 30px rgba(15,23,42,.08)' } } } }
  </script>
  <style>
    /* Анимации и мелочи без фреймворков */
    @keyframes floatY { 0%,100% { transform: translate(-50%,-50%) translateY(-8px) } 50% { transform: translate(-50%,-50%) translateY(8px) } }
    @keyframes driftX { 0%,100% { transform: translateY(-50%) translateX(-10px) } 50% { transform: translateY(-50%) translateX(10px) } }
    .glass { backdrop-filter: blur(8px) }
    .active-link { background: rgb(15 23 42); color: white }
    .dark .active-link { background: white; color: rgb(15 23 42) }

    /* Hero: «космические захватчики» */
    #invaders-hero {
      position: relative;
      width: 100%;
      height: clamp(320px, 55vh, 620px);
      border-radius: 28px;
      overflow: hidden;
      background: radial-gradient(1200px 600px at 80% -10%, #dff4ff 0%, #eef7ff 25%, #f8fbff 55%, #ffffff 100%);
      box-shadow: 0 20px 60px rgba(16,24,40,.06) inset;
      isolation: isolate;
    }
    #invaders-canvas {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      display: block;
    }
    #invaders-hero .overlay {
      position: absolute;
      inset: auto 0 0 0;
      padding: 28px clamp(16px, 4vw, 48px);
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
      gap: 16px;
      flex-wrap: wrap;
    }
    .hero-cta {
      pointer-events: auto;
      font: 700 14px/1.1 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      padding: 14px 20px;
      border-radius: 999px;
      color: #0f172a;
      background: linear-gradient(120deg, rgba(224,255,255,0.95), rgba(129,255,210,0.95));
      border: 1px solid rgba(15, 23, 42, 0.12);
      position: relative;
      overflow: hidden;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      animation: heroPulse 2s ease-in-out infinite;
      box-shadow: 0 10px 25px rgba(14, 165, 233, 0.35);
    }
    .hero-cta::after {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.5), transparent 60%);
      mix-blend-mode: screen;
      opacity: 0.8;
      animation: heroGlimmer 3s linear infinite;
    }
    .hero-cta:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 14px 32px rgba(14, 165, 233, 0.45);
    }
    .hero-cta:focus-visible {
      outline: 3px solid rgba(14, 165, 233, 0.6);
      outline-offset: 2px;
    }
    @keyframes heroPulse {
      0%, 100% { box-shadow: 0 10px 25px rgba(14, 165, 233, 0.35); filter: brightness(1); }
      45% { box-shadow: 0 12px 30px rgba(34, 197, 94, 0.4); filter: brightness(1.08); }
      70% { box-shadow: 0 8px 20px rgba(56, 189, 248, 0.32); filter: brightness(0.95); }
    }
    @keyframes heroGlimmer {
      0% { transform: translateX(-30%) scale(1); opacity: 0.7; }
      45% { transform: translateX(120%) scale(1.08); opacity: 1; }
      100% { transform: translateX(150%) scale(1.12); opacity: 0.4; }
    }
    @keyframes playgroundFadeIn {
      0% { opacity: 0; transform: translateY(20px) scale(0.98); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }
    .hero-showcase {
      pointer-events: auto;
      min-width: min(280px, 60vw);
      flex: 1 1 260px;
      max-width: 420px;
      border-radius: 24px;
      background: rgba(255, 255, 255, 0.78);
      border: 1px solid rgba(15, 23, 42, 0.08);
      backdrop-filter: blur(10px);
      padding: 18px;
      color: #0f172a;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.18);
    }
    .hero-showcase.dark {
      background: rgba(15, 23, 42, 0.7);
      color: rgba(248, 250, 252, 0.95);
      border-color: rgba(148, 163, 184, 0.25);
      box-shadow: 0 18px 36px rgba(8, 47, 73, 0.45);
    }
    .hero-card {
      display: grid;
      gap: 12px;
    }
    .hero-card figure { margin: 0; }
    .hero-card img {
      width: 100%;
      border-radius: 18px;
      box-shadow: 0 12px 32px rgba(15, 23, 42, 0.18);
      object-fit: cover;
    }
    .hero-card h3 {
      font-size: clamp(15px, 2.6vw, 18px);
      font-weight: 700;
    }
    .hero-card p {
      font-size: clamp(13px, 2.2vw, 15px);
      line-height: 1.45;
    }
    .hero-card footer {
      font-size: clamp(12px, 2vw, 14px);
      color: inherit;
      opacity: 0.8;
    }
    .gallery-nav {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border-radius: 12px;
      border: 1px solid rgba(100, 116, 139, 0.35);
      background: linear-gradient(160deg, rgba(248, 250, 252, 0.95), rgba(226, 232, 240, 0.8));
      transition: transform 0.18s ease, box-shadow 0.2s ease;
    }
    .gallery-nav svg {
      width: 14px;
      height: 14px;
      fill: rgba(15, 23, 42, 0.8);
    }
    .gallery-nav:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 18px rgba(148, 163, 184, 0.35);
    }
    .gallery-nav:focus-visible {
      outline: 3px solid rgba(59, 130, 246, 0.45);
      outline-offset: 2px;
    }

    /* Анимированные иконки для карточек услуг */
    @keyframes serviceGradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .service-icon {
      width: 56px;
      height: 56px;
      border-radius: 18px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
      background-size: 220% 220%;
      animation: serviceGradient 12s ease infinite;
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.16);
      color: #f8fafc;
    }
    .service-icon::after {
      content: '';
      position: absolute;
      inset: 1px;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.28);
      mix-blend-mode: screen;
      pointer-events: none;
    }
    .service-icon svg {
      width: 32px;
      height: 32px;
      position: relative;
      z-index: 1;
      stroke-width: 1.8;
      stroke: currentColor;
      fill: none;
    }
    .service-icon--cad {
      background-image: linear-gradient(135deg, #38bdf8, #2563eb, #14b8a6);
    }
    .service-icon--reverse {
      background-image: linear-gradient(135deg, #a855f7, #6366f1, #ec4899);
    }
    .service-icon--additive {
      background-image: linear-gradient(135deg, #f97316, #fb7185, #fde047);
      color: #0f172a;
    }
    .service-icon--proto {
      background-image: linear-gradient(135deg, #34d399, #22c55e, #0ea5e9);
    }
    .service-icon--medtech {
      background-image: linear-gradient(135deg, #2dd4bf, #22d3ee, #38bdf8);
    }
    .service-icon--edu {
      background-image: linear-gradient(135deg, #f59e0b, #f97316, #6366f1);
    }

    /* Проекты: усиленный дизайн */
    @keyframes projectGlow {
      0% { opacity: 0.6; transform: scale(0.96); }
      50% { opacity: 1; transform: scale(1); }
      100% { opacity: 0.6; transform: scale(0.96); }
    }
    .project-card {
      position: relative;
      border-radius: 32px;
      padding: 1px;
      background: linear-gradient(135deg, rgba(59,130,246,0.3), rgba(45,212,191,0.35), rgba(244,114,182,0.35));
      overflow: hidden;
      isolation: isolate;
    }
    .project-card::before {
      content: '';
      position: absolute;
      inset: -30% -10% auto -10%;
      height: 60%;
      background: radial-gradient(circle at 50% 50%, rgba(125,211,252,0.55), transparent 70%);
      filter: blur(0px);
      opacity: 0.8;
      animation: projectGlow 14s ease-in-out infinite;
    }
    .project-card__body {
      position: relative;
      display: grid;
      gap: 24px;
      border-radius: 31px;
      background: rgba(255, 255, 255, 0.92);
      padding: clamp(20px, 4vw, 32px);
      backdrop-filter: blur(14px);
      box-shadow: 0 24px 40px rgba(15, 23, 42, 0.16);
    }
    .project-card__headline {
      display: flex;
      align-items: flex-start;
      gap: 16px;
    }
    .project-card__icon {
      width: 48px;
      height: 48px;
      border-radius: 16px;
      background: rgba(14, 165, 233, 0.12);
      display: grid;
      place-items: center;
      color: #0284c7;
    }
    .project-card__icon svg {
      width: 24px;
      height: 24px;
      stroke: currentColor;
      stroke-width: 1.6;
      fill: none;
    }
    .project-card__eyebrow {
      font-size: 0.75rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-weight: 600;
      color: rgba(15, 23, 42, 0.55);
    }
    .project-card__tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 16px;
    }
    .project-card__tags span {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 0.75rem;
      font-weight: 600;
      background: rgba(148, 163, 184, 0.16);
      color: rgba(15, 23, 42, 0.7);
    }
    .project-card__meta {
      margin-top: 16px;
      padding: 14px 16px;
      border-radius: 20px;
      background: linear-gradient(135deg, rgba(56,189,248,0.12), rgba(125,211,252,0.24));
      font-size: 0.85rem;
      color: rgba(15, 23, 42, 0.8);
      display: flex;
      gap: 12px;
      align-items: center;
    }
    .project-card__meta span {
      flex: 1;
      line-height: 1.45;
    }
    .project-card__meta svg {
      width: 18px;
      height: 18px;
      stroke: currentColor;
      stroke-width: 1.8;
      fill: none;
      flex-shrink: 0;
    }
    .project-card__media {
      position: relative;
    }
    .project-card__slider {
      border-radius: 24px;
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.25);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1);
    }
    .project-card__slider .aspect-video {
      display: grid;
    }
    .project-card__slider .slide {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      background: radial-gradient(circle at 20% 20%, rgba(125, 211, 252, 0.4), transparent 70%),
                  linear-gradient(135deg, rgba(226, 232, 240, 0.9), rgba(148, 163, 184, 0.5));
      color: rgba(15, 23, 42, 0.8);
      font-weight: 600;
      text-align: center;
    }
    .project-card__slider .slide::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(160deg, rgba(255, 255, 255, 0.5), transparent 65%);
      mix-blend-mode: screen;
      pointer-events: none;
    }
    .project-card__controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 14px;
      gap: 12px;
    }
    .project-card__controls .gallery-nav {
      width: 42px;
      height: 42px;
      border-radius: 16px;
      background: linear-gradient(140deg, rgba(15, 23, 42, 0.92), rgba(30, 64, 175, 0.85));
      border-color: transparent;
      box-shadow: 0 16px 30px rgba(15, 23, 42, 0.3);
    }
    .project-card__controls .gallery-nav svg {
      width: 16px;
      height: 16px;
      fill: rgba(248, 250, 252, 0.92);
    }
    .project-card__controls .js-dots {
      display: inline-flex;
      gap: 6px;
    }
    .project-card__controls .js-dots span {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.5);
      transition: background-color 0.2s ease, transform 0.2s ease;
    }
    .project-card__controls .js-dots span.bg-slate-900 {
      background: rgba(15, 23, 42, 0.95) !important;
      transform: scale(1.2);
    }
    @media (min-width: 768px) {
      .project-card__body {
        grid-template-columns: minmax(0, 1fr) minmax(280px, 360px);
        align-items: center;
      }
      .project-card__media {
        margin-left: auto;
      }
    }
    .dark .service-icon::after {
      border-color: rgba(255, 255, 255, 0.15);
    }
    .dark .project-card__body {
      background: rgba(15, 23, 42, 0.82);
      color: rgba(226, 232, 240, 0.96);
      box-shadow: 0 24px 44px rgba(15, 23, 42, 0.45);
    }
    .dark .project-card__eyebrow { color: rgba(148, 163, 184, 0.7); }
    .dark .project-card__tags span {
      background: rgba(148, 163, 184, 0.22);
      color: rgba(226, 232, 240, 0.9);
    }
    .dark .project-card__meta {
      background: linear-gradient(135deg, rgba(56, 189, 248, 0.16), rgba(59, 130, 246, 0.18));
      color: rgba(226, 232, 240, 0.92);
    }
    .dark .project-card__slider {
      border-color: rgba(148, 163, 184, 0.35);
      box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.4);
    }
    .dark .project-card__slider .slide {
      background: radial-gradient(circle at 30% 30%, rgba(56, 189, 248, 0.35), transparent 70%),
                  linear-gradient(135deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.95));
      color: rgba(226, 232, 240, 0.92);
    }
    .dark .project-card__controls .gallery-nav {
      background: linear-gradient(140deg, rgba(56, 189, 248, 0.75), rgba(15, 23, 42, 0.95));
      box-shadow: 0 16px 32px rgba(8, 47, 73, 0.6);
    }
    .dark .project-card__controls .gallery-nav svg {
      fill: rgba(15, 23, 42, 0.9);
    }
    .dark .hero-cta {
      color: #f8fafc;
      background: linear-gradient(120deg, rgba(14,116,144,0.85), rgba(34,197,94,0.75));
      border-color: rgba(148, 163, 184, 0.35);
      box-shadow: 0 10px 26px rgba(14, 116, 144, 0.6);
    }
    .dark .hero-cta::after {
      background: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.45), transparent 60%);
    }
    .dark .hero-showcase {
      background: rgba(15, 23, 42, 0.72);
      color: rgba(248, 250, 252, 0.95);
      border-color: rgba(148, 163, 184, 0.28);
    }
    .dark .hero-card img {
      box-shadow: 0 12px 28px rgba(8, 47, 73, 0.6);
    }
    .dark .gallery-nav {
      border-color: rgba(148, 163, 184, 0.35);
      background: linear-gradient(160deg, rgba(15, 23, 42, 0.85), rgba(30, 41, 59, 0.7));
    }
    .dark .gallery-nav svg {
      fill: rgba(226, 232, 240, 0.9);
    }

    [data-experience-target] {
      position: relative;
    }
    [data-experience-target]::before {
      content: '';
      position: absolute;
      inset: -28px -32px -40px;
      border-radius: 64px;
      background: radial-gradient(140% 120% at 18% 16%, rgba(56, 189, 248, 0.32), transparent 70%);
      opacity: 0;
      transform: translateY(20px) scale(0.94);
      transition: opacity 0.6s ease, transform 0.6s ease;
      pointer-events: none;
      z-index: 0;
      filter: blur(0);
    }
    [data-experience-target] > * {
      position: relative;
      z-index: 1;
      animation: playgroundFadeIn 320ms cubic-bezier(0.22, 0.72, 0, 1) both;
    }
    [data-experience-target][data-mode='orbital']::before {
      opacity: 1;
      transform: translateY(0) scale(1);
      background:
        radial-gradient(140% 120% at 18% 18%, rgba(56, 189, 248, 0.34), transparent 70%),
        radial-gradient(120% 120% at 88% 76%, rgba(16, 185, 129, 0.28), transparent 70%);
    }
    [data-experience-target][data-mode='reaction']::before {
      opacity: 1;
      transform: translateY(0) scale(1);
      background:
        radial-gradient(140% 120% at 20% 20%, rgba(244, 114, 182, 0.32), transparent 70%),
        radial-gradient(120% 120% at 80% 80%, rgba(129, 140, 248, 0.3), transparent 70%);
    }
    [data-experience-target][data-mode='challenge']::before {
      opacity: 1;
      transform: translateY(0) scale(1);
      background:
        radial-gradient(140% 120% at 22% 22%, rgba(251, 191, 36, 0.32), transparent 70%),
        radial-gradient(120% 120% at 80% 78%, rgba(59, 130, 246, 0.28), transparent 70%);
    }
    [data-experience-target][data-mode='book']::before {
      opacity: 1;
      transform: translateY(0) scale(1);
      background:
        radial-gradient(140% 120% at 18% 18%, rgba(129, 140, 248, 0.35), transparent 70%),
        radial-gradient(120% 120% at 82% 78%, rgba(236, 72, 153, 0.28), transparent 70%);
    }
    [data-experience-target][data-mode='film']::before {
      opacity: 1;
      transform: translateY(0) scale(1);
      background:
        radial-gradient(140% 120% at 16% 18%, rgba(37, 99, 235, 0.32), transparent 70%),
        radial-gradient(120% 120% at 82% 76%, rgba(14, 165, 233, 0.32), transparent 70%);
    }

    .playground-card {
      position: relative;
      border-radius: 28px;
      border: 1px solid rgba(148, 163, 184, 0.28);
      background: rgba(248, 250, 252, 0.9);
      padding: clamp(20px, 4vw, 28px);
      display: grid;
      gap: 18px;
      box-shadow: 0 24px 60px rgba(15, 23, 42, 0.08);
      isolation: isolate;
    }
    .dark .playground-card {
      background: rgba(15, 23, 42, 0.82);
      border-color: rgba(71, 85, 105, 0.5);
      color: rgba(226, 232, 240, 0.95);
      box-shadow: 0 24px 60px rgba(2, 6, 23, 0.55);
    }
    .playground-card__header {
      display: flex;
      flex-wrap: wrap;
      align-items: flex-start;
      justify-content: space-between;
      gap: 16px;
    }
    .playground-card__metrics {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
    }
    .playground-card__metrics > div {
      display: grid;
      gap: 6px;
    }
    .playground-meta {
      text-transform: uppercase;
      font-size: 0.7rem;
      letter-spacing: 0.26em;
      color: rgba(100, 116, 139, 0.85);
    }
    .dark .playground-meta {
      color: rgba(148, 163, 184, 0.9);
    }
    .playground-metric-value {
      font-size: clamp(1.1rem, 3vw, 1.5rem);
      font-weight: 700;
      color: rgba(15, 23, 42, 0.95);
    }
    .dark .playground-metric-value {
      color: rgba(248, 250, 252, 0.95);
    }
    .playground-title {
      font-size: clamp(1.4rem, 3vw, 2rem);
      font-weight: 700;
      margin-top: 0.75rem;
    }
    .playground-copy {
      font-size: 0.94rem;
      line-height: 1.55;
      color: rgba(71, 85, 105, 0.9);
    }
    .dark .playground-copy {
      color: rgba(148, 163, 184, 0.92);
    }
    .playground-status {
      font-size: 0.9rem;
      color: rgba(71, 85, 105, 0.95);
    }
    .dark .playground-status {
      color: rgba(148, 163, 184, 0.95);
    }
    .playground-chip {
      display: inline-flex;
      align-items: center;
      padding: 0.32rem 0.9rem;
      border-radius: 999px;
      font-size: 0.66rem;
      letter-spacing: 0.26em;
      text-transform: uppercase;
      font-weight: 700;
      gap: 0.35rem;
    }
    .playground-chip--emerald {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.92), rgba(20, 184, 166, 0.88));
      color: #f8fafc;
    }
    .playground-chip--sky {
      background: linear-gradient(135deg, rgba(14, 165, 233, 0.92), rgba(59, 130, 246, 0.9));
      color: #f8fafc;
    }
    .playground-chip--slate {
      background: rgba(15, 23, 42, 0.85);
      color: rgba(248, 250, 252, 0.95);
    }
    .playground-canvas {
      position: relative;
      border-radius: 24px;
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.28);
      min-height: clamp(220px, 40vh, 320px);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.08);
      background: linear-gradient(160deg, rgba(15, 23, 42, 0.92), rgba(37, 99, 235, 0.48));
    }
    .playground-canvas canvas {
      width: 100%;
      height: 100%;
      display: block;
    }
    .dark .playground-canvas {
      border-color: rgba(71, 85, 105, 0.45);
      background: linear-gradient(160deg, rgba(2, 6, 23, 0.92), rgba(59, 130, 246, 0.35));
    }
    .playground-card__cta {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
    }
    .playground-card__cta button,
    .playground-card__cta a {
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
      border-radius: 999px;
      padding: 0.55rem 1.3rem;
      font-size: 0.88rem;
      font-weight: 600;
      text-decoration: none;
      border: 1px solid rgba(148, 163, 184, 0.38);
      background: rgba(255, 255, 255, 0.92);
      color: rgba(15, 23, 42, 0.92);
      transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
      cursor: pointer;
    }
    .playground-card__cta button:hover,
    .playground-card__cta a:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 30px rgba(15, 23, 42, 0.18);
    }
    .playground-card__cta .primary {
      background: linear-gradient(135deg, rgba(14, 165, 233, 0.95), rgba(34, 197, 94, 0.92));
      border-color: transparent;
      color: #fff;
      box-shadow: 0 18px 36px rgba(14, 165, 233, 0.25);
    }
    .playground-card__cta .secondary {
      background: rgba(248, 250, 252, 0.8);
      color: rgba(51, 65, 85, 0.95);
    }
    .playground-card__cta .is-disabled {
      opacity: 0.55;
      pointer-events: none;
    }
    .dark .playground-card__cta button,
    .dark .playground-card__cta a {
      background: rgba(15, 23, 42, 0.9);
      color: rgba(226, 232, 240, 0.95);
      border-color: rgba(71, 85, 105, 0.55);
    }
    .dark .playground-card__cta .secondary {
      background: rgba(30, 41, 59, 0.8);
      color: rgba(226, 232, 240, 0.92);
    }
    .playground-pad {
      position: relative;
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      overflow: hidden;
      min-height: clamp(200px, 36vh, 280px);
      display: grid;
      place-items: center;
      text-align: center;
      font-weight: 600;
      font-size: clamp(1.3rem, 3.4vw, 1.8rem);
      transition: background 0.3s ease, transform 0.3s ease, border-color 0.3s ease;
      background: radial-gradient(circle at 28% 30%, rgba(56, 189, 248, 0.35), rgba(15, 23, 42, 0.95));
      color: rgba(248, 250, 252, 0.95);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.06);
      cursor: pointer;
    }
    .playground-pad[data-state="waiting"] {
      background: linear-gradient(135deg, rgba(226, 232, 240, 0.12), rgba(56, 189, 248, 0.45));
      transform: scale(1.01);
      border-color: rgba(56, 189, 248, 0.55);
    }
    .playground-pad[data-state="ready"] {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.9), rgba(59, 130, 246, 0.78));
      transform: scale(1.03);
      border-color: rgba(16, 185, 129, 0.85);
    }
    .playground-pad[data-state="early"] {
      background: linear-gradient(135deg, rgba(249, 115, 22, 0.85), rgba(239, 68, 68, 0.8));
      border-color: rgba(248, 113, 113, 0.78);
    }
    .playground-pad:focus-visible {
      outline: 3px solid rgba(56, 189, 248, 0.6);
      outline-offset: 4px;
    }
    .playground-history {
      border-radius: 22px;
      border: 1px solid rgba(148, 163, 184, 0.28);
      background: rgba(248, 250, 252, 0.85);
      padding: 18px 22px;
    }
    .playground-history ul {
      margin-top: 10px;
      display: grid;
      gap: 6px;
      font-size: 0.9rem;
    }
    .playground-history li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      color: rgba(51, 65, 85, 0.92);
    }
    .dark .playground-history {
      background: rgba(15, 23, 42, 0.7);
      border-color: rgba(71, 85, 105, 0.45);
    }
    .dark .playground-history li {
      color: rgba(226, 232, 240, 0.92);
    }
    .playground-task {
      display: grid;
      gap: 12px;
    }
    .playground-task h4 {
      font-size: clamp(1.1rem, 2.6vw, 1.6rem);
      font-weight: 600;
    }
    .playground-task__meta {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      font-size: 0.85rem;
      color: rgba(71, 85, 105, 0.9);
    }
    .dark .playground-task__meta {
      color: rgba(148, 163, 184, 0.9);
    }
    .playground-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    .playground-hints ul {
      list-style: disc;
      padding-left: 1.1rem;
      display: grid;
      gap: 0.4rem;
      font-size: 0.92rem;
    }
    .playground-card--media {
      padding: 0;
      overflow: hidden;
    }
    .playground-media {
      position: relative;
      border-radius: 28px;
      padding: clamp(24px, 5vw, 34px);
      display: grid;
      gap: 14px;
      color: rgba(248, 250, 252, 0.96);
      isolation: isolate;
      min-height: clamp(220px, 36vh, 300px);
    }
    .playground-media::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: var(--playground-media-image, none);
      background-size: cover;
      background-position: center;
      opacity: 0.35;
      z-index: -2;
    }
    .playground-media::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.5), rgba(14, 165, 233, 0.55));
      z-index: -1;
    }
    .playground-media--film::after {
      background: linear-gradient(135deg, rgba(124, 58, 237, 0.58), rgba(14, 165, 233, 0.48));
    }
    .playground-card--media .playground-card__cta,
    .playground-card--media .playground-status {
      padding: 0 clamp(24px, 5vw, 34px) clamp(24px, 5vw, 32px);
    }
    [data-playground-tabs] button[data-active='true'] {
      background: linear-gradient(135deg, rgba(14, 165, 233, 0.95), rgba(34, 197, 94, 0.92));
      border-color: transparent;
      color: #fff;
      box-shadow: 0 18px 36px rgba(14, 165, 233, 0.28);
    }
    .dark [data-playground-tabs] button[data-active='true'] {
      background: linear-gradient(135deg, rgba(226, 232, 240, 0.92), rgba(148, 163, 184, 0.85));
      color: rgba(15, 23, 42, 0.92);
      box-shadow: 0 18px 36px rgba(15, 23, 42, 0.28);
    }

    #mobileMenu[data-open='true'] [data-menu-overlay] {
      opacity: 1;
    }

    #mobileMenu[data-open='true'] .menu-panel {
      transform: translateX(0);
    }

    @media (prefers-reduced-motion: reduce) {
      #mobileMenu [data-menu-overlay],
      #mobileMenu .menu-panel {
        transition: none !important;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      #invaders-canvas { display: none; }
      #invaders-hero { background: linear-gradient(135deg,#eef6ff,#ffffff 60%); }
      [data-experience-target]::before { transition: none; transform: none; }
      [data-experience-target] > * { animation: none; }
    }
  </style>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"EducationalOrganization",

    "department":[{"@type":"Organization","name":"Дополнительное профессиональное образование"}],
    "address":[
      {"@type":"PostalAddress","streetAddress":"ул. Беговая, 12","addressLocality":"Москва","addressCountry":"RU"}
    ],
    "sameAs":["https://technopark-rgsu.ru"]
  }
  </script>
</head>
<body class="min-h-screen bg-gradient-to-b from-white to-slate-50 text-slate-800 dark:from-slate-900 dark:to-slate-950 dark:text-slate-100">
  <a class="skip-link" href="#main">Перейти к основному содержимому</a>
  <!-- Прогресс-бар прокрутки -->
  <div id="progress" class="fixed top-0 left-0 h-1 bg-slate-900/90 origin-left z-50" style="transform:scaleX(0);transform-origin:left"></div>

  <header class="relative">
    <div class="site-topnav sticky top-0 z-40">
      <nav class="site-topnav__inner max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" aria-label="Главная навигация">
        <a href="#top" class="site-brand" aria-label="Технопарк РГСУ — на главную">
          <span class="site-brand__mark" aria-hidden="true">
            <img src="assets/technopark-rgsu-logo.svg" alt="" loading="lazy">
          </span>
          <span class="sr-only">Технопарк РГСУ</span>
        </a>
        <div class="hidden md:flex items-center gap-1" id="links" aria-label="Основные разделы">
          <a href="#services" class="px-3 py-2 rounded-xl text-sm font-medium hover:bg-slate-100 dark:hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400">Возможности</a>
          <a href="#equipment" class="px-3 py-2 rounded-xl text-sm font-medium hover:bg-slate-100 dark:hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400">Сеть 3D-печати</a>
          <a href="#courses" class="px-3 py-2 rounded-xl text-sm font-medium hover:bg-slate-100 dark:hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400">Обучение</a>
          <a href="#team" class="px-3 py-2 rounded-xl text-sm font-medium hover:bg-slate-100 dark:hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400">Команда</a>
          <a href="#faq" class="px-3 py-2 rounded-xl text-sm font-medium hover:bg-slate-100 dark:hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400">FAQ (часто задаваемые вопросы)</a>
          <a href="#contacts" class="px-3 py-2 rounded-xl text-sm font-medium hover:bg-slate-100 dark:hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400">Контакты</a>
        </div>
        <div class="flex items-center gap-2">
          <a href="#contacts" class="site-cta site-cta--nav">Связаться</a>
          <button id="burger" aria-expanded="false" aria-controls="mobileMenu" aria-label="Меню" class="site-toggle md:hidden">
            <svg viewBox="0 0 24 24" class="h-5 w-5"><path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
          </button>
        </div>
      </nav>
    </div>
    <div id="mobileMenu" class="md:hidden hidden fixed inset-0 z-[70]" role="dialog" aria-modal="true" aria-label="Мобильное меню">
      <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm opacity-0 transition-opacity duration-200" data-menu-overlay></div>
      <div class="absolute inset-y-0 right-0 flex w-full justify-end">
        <div class="menu-panel relative h-full w-full max-w-xs translate-x-full bg-white dark:bg-slate-900 px-6 py-10 shadow-2xl transition-transform duration-200" data-menu-panel>
          <div class="flex items-center justify-between gap-4">
            <span class="text-lg font-semibold">Навигация</span>
            <button type="button" class="site-toggle size-10 p-0 text-base" data-menu-close aria-label="Закрыть меню">
              <svg viewBox="0 0 24 24" class="h-5 w-5"><path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            </button>
          </div>
          <div id="mobile" class="mt-8 grid gap-2" role="menu">
            <a href="#services" role="menuitem" class="flex items-center justify-between rounded-2xl border border-slate-200 dark:border-slate-700 bg-white/90 dark:bg-slate-800/80 px-4 py-3 text-base font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400">Возможности</a>
            <a href="#equipment" role="menuitem" class="flex items-center justify-between rounded-2xl border border-slate-200 dark:border-slate-700 bg-white/90 dark:bg-slate-800/80 px-4 py-3 text-base font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400">Сеть 3D-печати</a>
            <a href="#courses" role="menuitem" class="flex items-center justify-between rounded-2xl border border-slate-200 dark:border-slate-700 bg-white/90 dark:bg-slate-800/80 px-4 py-3 text-base font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400">Обучение</a>
            <a href="#team" role="menuitem" class="flex items-center justify-between rounded-2xl border border-slate-200 dark:border-slate-700 bg-white/90 dark:bg-slate-800/80 px-4 py-3 text-base font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400">Команда</a>
            <a href="#faq" role="menuitem" class="flex items-center justify-between rounded-2xl border border-slate-200 dark:border-slate-700 bg-white/90 dark:bg-slate-800/80 px-4 py-3 text-base font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400">FAQ (часто задаваемые вопросы)</a>
            <a href="#contacts" role="menuitem" class="flex items-center justify-between rounded-2xl border border-slate-200 dark:border-slate-700 bg-white/90 dark:bg-slate-800/80 px-4 py-3 text-base font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400">Контакты</a>
          </div>
        </div>
      </div>
    </div>

    <div class="relative overflow-hidden">
      <div class="absolute inset-0 pointer-events-none">
        <div class="absolute -top-24 -right-16 h-72 w-72 rounded-full bg-sky-300/30 blur-3xl"></div>
        <div class="absolute -bottom-24 -left-16 h-72 w-72 rounded-full bg-emerald-300/30 blur-3xl"></div>
      </div>

      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-16 pb-16 md:pt-24 md:pb-20 relative z-10">
        <!-- Hero -->
        <div class="grid md:grid-cols-2 gap-10 md:gap-16 items-center" id="top">
          <div>
            <h1 class="text-4xl md:text-5xl font-bold leading-tight text-slate-900 dark:text-white">
              Step3D.Lab — цифровая лаборатория инженерии и аддитивного производства
            </h1>
            <p class="mt-4 text-lg text-slate-600 dark:text-slate-300 max-w-prose">Инженерный центр Step3D.Lab: цифровое проектирование, реверсивный инжиниринг, 3D‑сканирование и аддитивное производство. Команда технопарка РГСУ и ООО «СТЕП 3Д» выполняет разработки, сопровождает внедрение и обучает специалистов.</p>
            <div class="mt-6 flex flex-wrap gap-3">
              <button id="openModal" class="inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-3 text-white font-medium shadow hover:bg-slate-800 focus:outline-none focus:ring-4 focus:ring-slate-300">Оставить заявку</button>
              <button type="button" id="toggleAbout" class="about-toggle inline-flex items-center gap-2 rounded-xl border border-slate-300/80 dark:border-slate-600 px-5 py-3 font-medium transition" aria-controls="aboutBox" aria-expanded="false" data-label-open="О лаборатории" data-label-close="Свернуть описание">О лаборатории</button>
            </div>
            <div id="aboutBox" class="about-box glass" data-open="false" tabindex="-1" aria-hidden="true" role="region" aria-labelledby="toggleAbout">
              <div class="about-box__content" data-about-inner>
                <h2 class="text-xl font-semibold mb-2">О лаборатории</h2>
                <p class="text-slate-700 dark:text-slate-300">Step3D.Lab — команда инженеров, дизайнеров и преподавателей. Работаем на базе технопарка РГСУ совместно с ООО «СТЕП 3Д»: выполняем R&amp;D‑проекты, проводим курсы ДПО (48–72 ч), сопровождаем производственные задачи и студенческие инициативы. Фокус — CAD/CAE, реверсивный инжиниринг, 3D‑сканирование, прототипирование и аддитивное производство.</p>
              </div>
            </div>
          </div>
        </div>
        <!-- Hero: космические захватчики -->
        <div class="relative">
          <section id="invaders-hero" aria-label="Динамическая 3D-сцена космических захватчиков">
            <canvas id="invaders-canvas"></canvas>
            <div class="overlay">
              <button type="button" id="heroAction" class="hero-cta" aria-live="polite">Старт!</button>
              <section id="heroShowcase" class="hero-showcase" aria-live="polite" aria-atomic="true"></section>
            </div>
          </section>
        </div>
      </div>
    </div>
  </header>

  <main id="main" tabindex="-1">
  <section id="playground" class="relative py-16 md:py-24">
    <div class="pointer-events-none absolute inset-0 -z-10">
      <div class="absolute inset-x-0 top-0 h-80 bg-gradient-to-b from-sky-100/70 via-white/70 to-transparent dark:from-slate-800/60 dark:via-slate-900/60" aria-hidden="true"></div>
      <div class="absolute -top-24 right-[10%] h-72 w-72 rounded-full bg-sky-300/40 blur-3xl dark:bg-sky-500/40" aria-hidden="true"></div>
      <div class="absolute -bottom-28 left-[5%] h-80 w-80 rounded-full bg-emerald-300/30 blur-3xl dark:bg-emerald-500/40" aria-hidden="true"></div>
    </div>
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid gap-10 lg:grid-cols-[minmax(0,1.35fr)_minmax(0,1fr)] items-start">
        <div class="space-y-6">
          <div class="inline-flex items-center gap-2 rounded-full border border-sky-200/70 bg-white/70 px-3 py-1 text-xs font-semibold uppercase tracking-[0.28em] text-sky-700 dark:border-sky-500/40 dark:bg-slate-900/70 dark:text-sky-200">R22.Play · media lab</div>
          <div class="space-y-3">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-white">Игровая зона Step3D</h2>
            <p class="text-base md:text-lg text-slate-600 dark:text-slate-300 max-w-3xl">Экспериментируйте с мини‑играми и практиками фокусировки внимания, открывайте задачу дня, собирайте подборки книг и фильмов об инженерии. Все данные хранятся локально в рамках текущей сессии.</p>
          </div>
          <div class="rounded-3xl border border-slate-200/80 bg-white/90 p-5 shadow-[0_24px_60px_rgba(15,23,42,0.08)] backdrop-blur dark:border-slate-700/70 dark:bg-slate-900/70" data-playground>
            <div class="flex flex-wrap items-center gap-2" role="tablist" aria-label="Режимы игровой зоны" data-playground-tabs>
              <button type="button" class="inline-flex items-center gap-2 rounded-2xl border border-slate-200/70 bg-white/70 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-slate-600 shadow-sm transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400 dark:border-slate-700/70 dark:bg-slate-800/80 dark:text-slate-300" data-experience-mode="orbital" aria-selected="false">Аркада «Орбитальный охотник»</button>
              <button type="button" class="inline-flex items-center gap-2 rounded-2xl border border-slate-200/70 bg-white/70 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-slate-600 shadow-sm transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400 dark:border-slate-700/70 dark:bg-slate-800/80 dark:text-slate-300" data-experience-mode="reaction" aria-selected="false">Реакция «Поймай сигнал»</button>
              <button type="button" class="inline-flex items-center gap-2 rounded-2xl border border-slate-200/70 bg-white/70 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-slate-600 shadow-sm transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400 dark:border-slate-700/70 dark:bg-slate-800/80 dark:text-slate-300" data-experience-mode="challenge" aria-selected="false">Задача дня</button>
              <button type="button" class="inline-flex items-center gap-2 rounded-2xl border border-slate-200/70 bg-white/70 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-slate-600 shadow-sm transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400 dark:border-slate-700/70 dark:bg-slate-800/80 dark:text-slate-300" data-experience-mode="book" aria-selected="false">Рекомендация · книга</button>
              <button type="button" class="inline-flex items-center gap-2 rounded-2xl border border-slate-200/70 bg-white/70 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-slate-600 shadow-sm transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400 dark:border-slate-700/70 dark:bg-slate-800/80 dark:text-slate-300" data-experience-mode="film" aria-selected="false">Рекомендация · фильм</button>
            </div>
            <div class="mt-6 relative">
              <div data-experience-target class="grid gap-6"></div>
            </div>
            <p class="mt-6 flex flex-wrap items-center gap-3 text-xs uppercase tracking-[0.26em] text-slate-400 dark:text-slate-500">
              <span class="inline-flex items-center gap-2 rounded-full border border-slate-200/70 px-3 py-1 dark:border-slate-700/70"><span class="size-2 rounded-full bg-emerald-400"></span>Beta</span>
              <span>Игровые данные не покидают браузер</span>
              <span>Обновляем подборки каждую неделю</span>
            </p>
          </div>
        </div>
        <aside class="space-y-5 lg:space-y-6">
          <div class="rounded-3xl border border-slate-200/80 bg-white/90 p-6 shadow-[0_24px_60px_rgba(15,23,42,0.08)] backdrop-blur dark:border-slate-700/70 dark:bg-slate-900/70">
            <h3 class="text-lg font-semibold text-slate-900 dark:text-slate-100">Ваша статистика</h3>
            <p class="mt-1 text-sm text-slate-500 dark:text-slate-400">Лучшие результаты сохраняются до закрытия вкладки.</p>
            <dl class="mt-4 space-y-3 text-sm" data-playground-stats>
              <div class="flex items-center justify-between gap-3 rounded-2xl border border-slate-200/60 bg-slate-50/80 px-4 py-3 dark:border-slate-700/60 dark:bg-slate-800/70">
                <dt class="font-medium text-slate-600 dark:text-slate-300">Орбитальный охотник</dt>
                <dd class="font-semibold text-slate-900 dark:text-white" data-stat-orbital>—</dd>
              </div>
              <div class="flex items-center justify-between gap-3 rounded-2xl border border-slate-200/60 bg-slate-50/80 px-4 py-3 dark:border-slate-700/60 dark:bg-slate-800/70">
                <dt class="font-medium text-slate-600 dark:text-slate-300">Реакция</dt>
                <dd class="font-semibold text-slate-900 dark:text-white" data-stat-reaction>—</dd>
              </div>
              <div class="flex items-center justify-between gap-3 rounded-2xl border border-slate-200/60 bg-slate-50/80 px-4 py-3 dark:border-slate-700/60 dark:bg-slate-800/70">
                <dt class="font-medium text-slate-600 dark:text-slate-300">Задачи изучены</dt>
                <dd class="font-semibold text-slate-900 dark:text-white" data-stat-challenge>0</dd>
              </div>
            </dl>
          </div>
          <div class="rounded-3xl border border-slate-200/70 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6 text-slate-100 shadow-[0_24px_60px_rgba(15,23,42,0.12)] dark:from-slate-800 dark:via-slate-900 dark:to-slate-950">
            <h3 class="text-lg font-semibold">Советы для инженеров</h3>
            <ul class="mt-4 space-y-3 text-sm">
              <li class="flex gap-3"><span class="mt-1 h-2.5 w-2.5 rounded-full bg-emerald-400"></span><span>Чередуйте режимы: аркада разогревает внимание, а задача дня развивает стратегическое мышление.</span></li>
              <li class="flex gap-3"><span class="mt-1 h-2.5 w-2.5 rounded-full bg-sky-400"></span><span>Фиксируйте идеи после просмотра фильма или чтения главы — добавьте их в проектный журнал.</span></li>
              <li class="flex gap-3"><span class="mt-1 h-2.5 w-2.5 rounded-full bg-purple-400"></span><span>Сделайте из мини‑игр командное соревнование: запишите лучшие результаты и сравните на стенде лаборатории.</span></li>
            </ul>
            <p class="mt-4 text-xs uppercase tracking-[0.26em] text-slate-400">Step3D · mindset</p>
          </div>
        </aside>
      </div>
    </div>
  </section>
  <!-- Возможности -->
  <section id="services" class="py-16 md:py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl md:text-4xl font-bold mb-6">Возможности лаборатории</h2>
      <p class="text-slate-600 dark:text-slate-300 max-w-3xl">Полный цикл: от скана и CAD до печати, постобработки и презентации. Параллельно обучаем и сопровождаем проекты.</p>
      <div class="mt-8 grid sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
        <!-- Карточки -->
        <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm hover:shadow-md transition-shadow dark:border-slate-700 dark:bg-slate-800">
          <div class="flex items-start gap-4">
            <span class="service-icon service-icon--cad" aria-hidden="true">
              <svg viewBox="0 0 64 64" stroke-linecap="round" stroke-linejoin="round">
                <path d="M16 24 32 16l16 8v16l-16 8-16-8Z"/>
                <path d="M32 16v16l16 8" opacity="0.6"/>
                <path d="M16 24l16 8" opacity="0.6"/>
                <circle cx="32" cy="32" r="22" stroke-dasharray="6 10" opacity="0.4"/>
              </svg>
            </span>
            <div>
              <h3 class="text-lg font-semibold leading-tight">CAD/CAE‑моделирование</h3>
              <p class="mt-1 text-slate-600 dark:text-slate-300 text-sm">Параметрические модели, сборки, FEA‑анализ</p>
              <span class="mt-3 inline-flex items-center rounded-lg bg-slate-100 dark:bg-slate-700 px-2.5 py-1 text-xs text-slate-600 dark:text-slate-200">R&amp;D</span>
            </div>
          </div>
        </article>
        <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm hover:shadow-md transition-shadow dark:border-slate-700 dark:bg-slate-800">
          <div class="flex items-start gap-4">
            <span class="service-icon service-icon--reverse" aria-hidden="true">
              <svg viewBox="0 0 64 64" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 22h24l6 10-6 10H20l-6-10Z"/>
                <path d="M26 32h12"/>
                <path d="M32 20v-6" opacity="0.55"/>
                <path d="M20 20 16 14" opacity="0.55"/>
                <path d="M44 20 48 14" opacity="0.55"/>
                <path d="M20 44 16 50" opacity="0.55"/>
                <path d="M44 44 48 50" opacity="0.55"/>
                <circle cx="32" cy="32" r="18" stroke-dasharray="4 6" opacity="0.4"/>
              </svg>
            </span>
            <div>
              <h3 class="text-lg font-semibold leading-tight">Реверсивный инжиниринг</h3>
              <p class="mt-1 text-slate-600 dark:text-slate-300 text-sm">3D‑сканирование, обработка сеток, NURBS/САПР</p>
              <span class="mt-3 inline-flex items-center rounded-lg bg-slate-100 dark:bg-slate-700 px-2.5 py-1 text-xs text-slate-600 dark:text-slate-200">Geomagic · GOM</span>
            </div>
          </div>
        </article>
        <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm hover:shadow-md transition-shadow dark:border-slate-700 dark:bg-slate-800">
          <div class="flex items-start gap-4">
            <span class="service-icon service-icon--additive" aria-hidden="true">
              <svg viewBox="0 0 64 64" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 18h28l4 8H14l4-8Z"/>
                <path d="M22 26v16l10 8 10-8V26"/>
                <path d="M32 34v16" opacity="0.7"/>
                <path d="M22 42h20" opacity="0.6"/>
                <path d="M26 14h12" opacity="0.6"/>
              </svg>
            </span>
            <div>
              <h3 class="text-lg font-semibold leading-tight">Аддитивное производство</h3>
              <p class="mt-1 text-slate-600 dark:text-slate-300 text-sm">FDM/DLP печать, постобработка, литьё</p>
              <span class="mt-3 inline-flex items-center rounded-lg bg-slate-100 dark:bg-slate-700 px-2.5 py-1 text-xs text-slate-600 dark:text-slate-200">FDM · DLP</span>
            </div>
          </div>
        </article>
        <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm hover:shadow-md transition-shadow dark:border-slate-700 dark:bg-slate-800">
          <div class="flex items-start gap-4">
            <span class="service-icon service-icon--proto" aria-hidden="true">
              <svg viewBox="0 0 64 64" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 20h24v24H20Z"/>
                <path d="M20 28h-8" opacity="0.6"/>
                <path d="M20 36h-8" opacity="0.6"/>
                <path d="M52 28h-8" opacity="0.6"/>
                <path d="M52 36h-8" opacity="0.6"/>
                <path d="M28 16v8" opacity="0.6"/>
                <path d="M36 16v8" opacity="0.6"/>
                <path d="M28 44v8" opacity="0.6"/>
                <path d="M36 44v8" opacity="0.6"/>
              </svg>
            </span>
            <div>
              <h3 class="text-lg font-semibold leading-tight">Прототипирование</h3>
              <p class="mt-1 text-slate-600 dark:text-slate-300 text-sm">Мастер‑модели, приспособления, малые серии</p>
              <span class="mt-3 inline-flex items-center rounded-lg bg-slate-100 dark:bg-slate-700 px-2.5 py-1 text-xs text-slate-600 dark:text-slate-200">CNC · Laser</span>
            </div>
          </div>
        </article>
        <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm hover:shadow-md transition-shadow dark:border-slate-700 dark:bg-slate-800">
          <div class="flex items-start gap-4">
            <span class="service-icon service-icon--medtech" aria-hidden="true">
              <svg viewBox="0 0 64 64" stroke-linecap="round" stroke-linejoin="round">
                <path d="M32 18v28"/>
                <path d="M18 32h28"/>
                <rect x="18" y="18" width="28" height="28" rx="10" opacity="0.45"/>
                <path d="M22 24 16 18" opacity="0.5"/>
                <path d="M42 24 48 18" opacity="0.5"/>
              </svg>
            </span>
            <div>
              <h3 class="text-lg font-semibold leading-tight">Мед. изделия</h3>
              <p class="mt-1 text-slate-600 dark:text-slate-300 text-sm">Ортезы, импланты, биопротезы</p>
              <span class="mt-3 inline-flex items-center rounded-lg bg-slate-100 dark:bg-slate-700 px-2.5 py-1 text-xs text-slate-600 dark:text-slate-200">MedTech</span>
            </div>
          </div>
        </article>
        <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm hover:shadow-md transition-shadow dark:border-slate-700 dark:bg-slate-800">
          <div class="flex items-start gap-4">
            <span class="service-icon service-icon--edu" aria-hidden="true">
              <svg viewBox="0 0 64 64" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 22h36l-18 12Z"/>
                <path d="M20 30v12l12 6 12-6V30"/>
                <path d="M32 34v14" opacity="0.6"/>
                <path d="M44 26h6" opacity="0.6"/>
              </svg>
            </span>
            <div>
              <h3 class="text-lg font-semibold leading-tight">Образование</h3>
              <p class="mt-1 text-slate-600 dark:text-slate-300 text-sm">Курсы ДПО, проектные школы, чемпионаты</p>
              <span class="mt-3 inline-flex items-center rounded-lg bg-slate-100 dark:bg-slate-700 px-2.5 py-1 text-xs text-slate-600 dark:text-slate-200">72 ч · 48 ч</span>
            </div>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- Распределенная сеть 3D-печати -->
  <section id="equipment" class="py-16 md:py-24 bg-white dark:bg-slate-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl md:text-4xl font-bold mb-6">Распределенная сеть 3D-печати</h2>
      <p class="text-slate-600 dark:text-slate-300 max-w-3xl">Экспериментальный проект технопарка РГСУ для слушателей программ ДПО и студентов университета: учимся проектировать, печатать и запускать инженерные кейсы в FabLab-формате.</p>
      <div class="mt-6 grid lg:grid-cols-2 gap-8">

        <div class="rounded-3xl border border-slate-200 dark:border-slate-700 p-4">
          <h3 class="text-lg font-semibold mb-3">3D‑принтеры · FDM</h3>
          <ul class="grid sm:grid-cols-2 gap-3">
            <li class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 flex items-center justify-between"><span class="font-medium">Ultimaker 3</span><span class="text-sm text-slate-500">—</span></li>
            <li class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 flex items-center justify-between"><span class="font-medium">Picaso 3D Designer X</span><span class="text-sm text-slate-500">—</span></li>
          </ul>
        </div>
        <div class="rounded-3xl border border-slate-200 dark:border-slate-700 p-4">
          <h3 class="text-lg font-semibold mb-3">3D‑принтеры · DLP/SLA</h3>
          <ul class="grid sm:grid-cols-2 gap-3">
            <li class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 flex items-center justify-between"><span class="font-medium">Formlabs</span><span class="text-sm text-slate-500">—</span></li>
          </ul>
        </div>
        <div class="rounded-3xl border border-slate-200 dark:border-slate-700 p-6 bg-white/80 dark:bg-slate-800/80 js-gallery" data-interval="4800">
          <div class="flex flex-wrap items-center gap-3 justify-between mb-4">
            <div>
              <h3 class="text-lg font-semibold leading-tight">Галерея проектов</h3>
              <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">Покажите реализованные кейсы лаборатории — фотографии будут листаться автоматически.</p>
            </div>
            <div class="flex gap-2">
              <button type="button" class="gallery-nav js-prev" aria-label="Предыдущее фото">
                <svg viewBox="0 0 20 20" aria-hidden="true"><path d="M12.5 4.5 7 10l5.5 5.5" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
              </button>
              <button type="button" class="gallery-nav js-next" aria-label="Следующее фото">
                <svg viewBox="0 0 20 20" aria-hidden="true"><path d="M7.5 4.5 13 10l-5.5 5.5" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
              </button>
            </div>
          </div>
          <div class="relative overflow-hidden rounded-2xl bg-slate-100 dark:bg-slate-900 aspect-[4/3]">
            <figure class="slide absolute inset-0 flex flex-col justify-end p-6 gap-3 text-white" style="background:linear-gradient(135deg,#0ea5e9,rgba(14,165,233,0.85)),url('https://images.unsplash.com/photo-1527430253228-e93688616381?auto=format&fit=crop&w=900&q=80') center/cover;">
              <figcaption class="backdrop-blur-sm bg-white/15 rounded-2xl p-4">
                <p class="text-sm font-semibold">Прототип корпуса дрона</p>
                <p class="text-xs opacity-80">Аддитивное производство, постобработка и контроль геометрии.</p>
              </figcaption>
            </figure>
            <figure class="slide absolute inset-0 flex flex-col justify-end p-6 gap-3 text-white hidden" style="background:linear-gradient(135deg,#6366f1,rgba(99,102,241,0.85)),url('https://images.unsplash.com/photo-1581090468181-4f7c91f3c1d9?auto=format&fit=crop&w=900&q=80') center/cover;">
              <figcaption class="backdrop-blur-sm bg-white/15 rounded-2xl p-4">
                <p class="text-sm font-semibold">Точное сканирование</p>
                <p class="text-xs opacity-80">Лазерный 3D‑сканер и обработка облаков точек.</p>
              </figcaption>
            </figure>
            <figure class="slide absolute inset-0 flex flex-col justify-end p-6 gap-3 text-white hidden" style="background:linear-gradient(135deg,#f97316,rgba(249,115,22,0.85)),url('https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?auto=format&fit=crop&w=900&q=80') center/cover;">
              <figcaption class="backdrop-blur-sm bg-white/15 rounded-2xl p-4">
                <p class="text-sm font-semibold">Образовательные интенсивы</p>
                <p class="text-xs opacity-80">Командная работа студентов и R&amp;D проекты.</p>
              </figcaption>
            </figure>
          </div>
          <div class="flex items-center justify-center gap-2 mt-4 js-dots" role="group" aria-label="Переключение фотографий"></div>
        </div>
        <div class="rounded-3xl border border-slate-200 dark:border-slate-700 p-4">
          <h3 class="text-lg font-semibold mb-3">GenAI + Open Source</h3>
          <ul class="grid sm:grid-cols-2 gap-3">
            <li class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 flex flex-col gap-1">
              <a href="https://www.perplexity.ai/" class="font-medium text-slate-900 dark:text-slate-100 hover:text-sky-600 dark:hover:text-sky-400" target="_blank" rel="noopener">Perplexity AI</a>
              <p class="text-sm text-slate-500 dark:text-slate-300">AI‑поиск и аналитика для исследований и брифов.</p>
            </li>
            <li class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 flex flex-col gap-1">
              <a href="https://qwenlm.ai/" class="font-medium text-slate-900 dark:text-slate-100 hover:text-sky-600 dark:hover:text-sky-400" target="_blank" rel="noopener">Qwen AI</a>
              <p class="text-sm text-slate-500 dark:text-slate-300">Мультимодальные модели Alibaba для генерации контента и кода.</p>
            </li>
            <li class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 flex flex-col gap-1">
              <a href="https://www.blender.org/" class="font-medium text-slate-900 dark:text-slate-100 hover:text-sky-600 dark:hover:text-sky-400" target="_blank" rel="noopener">Blender</a>
              <p class="text-sm text-slate-500 dark:text-slate-300">Открытый пакет для 3D‑моделирования, анимации и рендера.</p>
            </li>
            <li class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 flex flex-col gap-1">
              <a href="https://www.freecadweb.org/" class="font-medium text-slate-900 dark:text-slate-100 hover:text-sky-600 dark:hover:text-sky-400" target="_blank" rel="noopener">FreeCAD (FriCAD)</a>
              <p class="text-sm text-slate-500 dark:text-slate-300">Параметрический CAD-пакет с открытым исходным кодом.</p>
            </li>
            <li class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 flex flex-col gap-1">
              <a href="https://openscad.org/" class="font-medium text-slate-900 dark:text-slate-100 hover:text-sky-600 dark:hover:text-sky-400" target="_blank" rel="noopener">OpenSCAD</a>
              <p class="text-sm text-slate-500 dark:text-slate-300">Скриптовый CAD для точных параметрических моделей.</p>
            </li>
            <li class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 flex flex-col gap-1">
              <a href="https://huggingface.co/" class="font-medium text-slate-900 dark:text-slate-100 hover:text-sky-600 dark:hover:text-sky-400" target="_blank" rel="noopener">Hugging Face</a>
              <p class="text-sm text-slate-500 dark:text-slate-300">Маркетплейс моделей ИИ и инструменты для экспериментов.</p>
            </li>
            <li class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 flex flex-col gap-1">
              <a href="https://tflex.ru/products/cad/" class="font-medium text-slate-900 dark:text-slate-100 hover:text-sky-600 dark:hover:text-sky-400" target="_blank" rel="noopener">T‑FLEX CAD</a>
              <p class="text-sm text-slate-500 dark:text-slate-300">Профессиональный параметрический CAD российского производства.</p>
            </li>
            <li class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4 flex flex-col gap-1">
              <a href="https://notebooklm.google/" class="font-medium text-slate-900 dark:text-slate-100 hover:text-sky-600 dark:hover:text-sky-400" target="_blank" rel="noopener">NotebookLM</a>
              <p class="text-sm text-slate-500 dark:text-slate-300">Сервис Google для генерации заметок и исследований на основе ваших источников.</p>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Обучение и мастер-классы -->
  <section id="courses" class="relative overflow-hidden py-16 md:py-24 bg-white dark:bg-slate-900">
    <div class="pointer-events-none absolute inset-x-0 -top-32 h-72 bg-gradient-to-b from-sky-100/60 via-white to-transparent dark:from-slate-800/70 dark:via-slate-900" aria-hidden></div>
    <div class="pointer-events-none absolute inset-y-0 right-0 hidden lg:block w-96 translate-x-1/3 bg-[radial-gradient(circle_at_top,_rgba(14,165,233,0.08),_transparent_65%)] dark:bg-[radial-gradient(circle_at_top,_rgba(56,189,248,0.12),_transparent_70%)]" aria-hidden></div>
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
        <div class="max-w-3xl space-y-3">
          <p class="inline-flex items-center gap-2 rounded-full border border-sky-200/70 bg-sky-50/80 px-3 py-1 text-xs font-semibold uppercase tracking-[0.28em] text-sky-700 dark:border-sky-500/50 dark:bg-sky-500/10 dark:text-sky-200">R22.Lab · education</p>
          <h2 class="text-3xl md:text-4xl font-bold leading-tight text-slate-900 dark:text-white">Обучение и мастер-классы</h2>
          <p class="text-base md:text-lg text-slate-600 dark:text-slate-300">Погружение в CAD/CAE, 3D‑сканирование, аддитивное производство и промышленный дизайн — от интенсивов для школьников до профессионального дополнительного образования.</p>
        </div>
        
      </div>
      <div class="mt-10 grid gap-6 lg:grid-cols-[minmax(0,1fr)_minmax(0,1.1fr)] xl:gap-10">
        <a class="course-card group focus:outline-none focus-visible:ring-4 focus-visible:ring-sky-300/70 dark:focus-visible:ring-sky-500/40" href="reverse-additive.html">
          <div class="course-card__inner">
            <div class="flex flex-col gap-6">
              <div class="flex items-start justify-between gap-4">
                <div class="space-y-4">
                  <div class="flex flex-wrap items-center gap-3">
                    <svg viewBox="0 0 64 64" class="h-12 w-12 shrink-0" aria-hidden><defs><linearGradient id="c2" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#0ea5e9"/><stop offset="1" stop-color="#22c55e"/></linearGradient></defs><rect x="6" y="6" width="52" height="52" rx="12" fill="url(#c2)"/><path d="M20 44V20l12-6 12 6v24l-12 6-12-6z M32 14v36" stroke="#fff" stroke-width="2" fill="none"/></svg>
                    <div>
                      <h3 class="text-xl font-semibold leading-tight text-slate-900 transition-colors group-hover:text-sky-600 dark:text-slate-100 dark:group-hover:text-sky-300">ДПО R22.AM «Реверсивный инжиниринг и аддитивное производство»</h3>
                      <p class="mt-1 text-sm text-slate-500 dark:text-slate-400">Углублённый трек по реверс-инжинирингу, подготовке цифровых двойников и 3D‑печати</p>
                    </div>
                  </div>
                  <p class="text-base text-slate-600 dark:text-slate-300">3D‑сканирование, обработка сканов, CAD, 3D‑печать</p>
                  <div class="flex flex-wrap gap-2 text-sm text-slate-500 dark:text-slate-300">
                    <span class="badge-neutral">48–72 ч</span>
                    <span class="badge-neutral">Студенты и специалисты</span>
                    <span class="badge-accent badge-accent--outline">Стоимость: 48 000 ₽</span>
                  </div>
                </div>
                <svg viewBox="0 0 24 24" class="mt-2 h-5 w-5 text-slate-300 transition-transform group-hover:translate-x-1 group-hover:text-sky-500 dark:text-slate-500 dark:group-hover:text-sky-300"><path d="M5 12h14M13 5l7 7-7 7" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
              </div>
              <div class="space-y-4 text-sm text-slate-600 dark:text-slate-300">
                <div class="grid gap-2 sm:flex sm:flex-wrap sm:items-center sm:gap-3">
                  <span class="badge-soft badge-soft--sky"><svg viewBox="0 0 20 20" class="h-4 w-4" aria-hidden><path d="M10 2a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8Zm3.53 8.53-3.25 3.25a.75.75 0 0 1-1.06-1.06l2.97-2.97V6.75a.75.75 0 0 1 1.5 0v3.28a.75.75 0 0 1-.16.47Z" fill="currentColor"/></svg>Старт через 24 дня</span>
                  <span class="badge-soft badge-soft--sky"><svg viewBox="0 0 20 20" class="h-4 w-4" aria-hidden><path d="M3 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Zm12.5 3H4.5v7a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5Zm-10-4a.5.5 0 0 0-.5.5V7h11V4.5a.5.5 0 0 0-.5-.5Z" fill="currentColor"/></svg>Свободно 11 из 12 мест</span>
                </div>
                <div class="grid gap-3 sm:grid-cols-2">
                  <div class="rounded-2xl border border-slate-200/70 bg-white/80 p-4 shadow-sm transition group-hover:shadow-md dark:border-slate-600/60 dark:bg-slate-800/70">
                    <p class="text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500">Результат</p>
                    <p class="mt-2 font-medium text-slate-800 dark:text-slate-100">Digital-твин изделия и документация</p>
                  </div>
                  <div class="rounded-2xl border border-slate-200/70 bg-white/80 p-4 shadow-sm transition group-hover:shadow-md dark:border-slate-600/60 dark:bg-slate-800/70">
                    <p class="text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500">Практика</p>
                    <p class="mt-2 font-medium text-slate-800 dark:text-slate-100">Производственный кейс с наставником</p>
                  </div>
                </div>
                <div>
                  <div class="course-progress" role="img" aria-label="Заполненность группы 11 из 12">
                    <span style="width: 91.6%"></span>
                  </div>
                  <div class="mt-2 flex flex-wrap items-center justify-between gap-3 text-xs uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500">
                    <span>Места</span>
                    <span>11 / 12</span>
                  </div>
                </div>
              </div>
              <div class="flex flex-wrap items-center gap-4 pt-2">
                <span class="inline-flex items-center gap-2 rounded-full bg-sky-100/80 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-sky-700 transition group-hover:bg-sky-200/80 dark:bg-sky-500/10 dark:text-sky-200 dark:group-hover:bg-sky-500/20">
                  <svg viewBox="0 0 20 20" class="h-4 w-4" aria-hidden><path d="M10 3a7 7 0 1 0 7 7 7.008 7.008 0 0 0-7-7Zm0 1.5A5.5 5.5 0 1 1 4.5 10 5.506 5.506 0 0 1 10 4.5Zm-.75 2.75A.75.75 0 0 1 10 6.5h.008a.75.75 0 0 1 .742.648L10.75 7.25v3l2.112 2.111a.75.75 0 0 1-.976 1.133l-.084-.072-2.25-2.25a.747.747 0 0 1-.21-.39l-.012-.11Z" fill="currentColor"/></svg>
                  Экспресс-набор открыт
                </span>
                <span class="text-sm font-semibold text-sky-600 transition group-hover:text-sky-700 dark:text-sky-300 dark:group-hover:text-sky-200">Подробнее о программе</span>
              </div>
            </div>
          </div>
        </a>
      </div>
    </div>
  </section>

  <!-- Команда -->
  <section id="team" class="py-16 md:py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl md:text-4xl font-bold mb-6">Команда</h2>
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
        <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800 flex items-center gap-4">
          <div class="grid place-items-center rounded-2xl bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-100" style="width:64px;height:64px">ВГ</div>
          <div>
            <div class="font-semibold">Владимир Ганьшин</div>
            <div class="text-sm text-slate-500 dark:text-slate-300">руководитель лаборатории R22.LAB</div>
            <div class="mt-1 text-sm text-slate-600 dark:text-slate-300">ведущий инженер-исследователь</div>
          </div>
        </div>
        <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800 flex items-center gap-4">
          <div class="grid place-items-center rounded-2xl bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-100" style="width:64px;height:64px">АП</div>
          <div>
            <div class="font-semibold">Хритисна Понкратова</div>
            <div class="text-sm text-slate-500 dark:text-slate-300">руководитель СКБ «X.Lab»</div>
            <div class="mt-1 text-sm text-slate-600 dark:text-slate-300">главный тренер и ведущий реверс-инженер</div>
          </div>
        </div>
        <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800 flex items-center gap-4">
          <div class="grid place-items-center rounded-2xl bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-100" style="width:64px;height:64px">АР</div>
          <div>
            <div class="font-semibold">Алексей Рекут</div>
            <div class="text-sm text-slate-500 dark:text-slate-300">главный инженер‑конструктор</div>
            <div class="mt-1 text-sm text-slate-600 dark:text-slate-300">капитан команды «Дезинтегратор», Битва роботов</div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- FAQ -->
  <section id="faq" class="py-16 md:py-24 bg-white dark:bg-slate-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl md:text-4xl font-bold mb-6">FAQ (часто задаваемые вопросы)</h2>
      <div class="grid md:grid-cols-2 gap-6 md:gap-8">
        <details class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm open:shadow-md dark:border-slate-700 dark:bg-slate-800"><summary class="cursor-pointer font-medium">Какие материалы печати доступны?</summary><p class="mt-2 text-slate-600 dark:text-slate-300">PLA, PETG, ABS, нейлон; смолы DLP/SLA (стандартные и инженерные). Постобработка и окраска — доступны.</p></details>
        <details class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm open:shadow-md dark:border-slate-700 dark:bg-slate-800"><summary class="cursor-pointer font-medium">Сколько занимает цикл «скан‑CAD‑печать»?</summary><p class="mt-2 text-slate-600 dark:text-slate-300">От 2 до 10 рабочих дней — зависит от размера, точности и загрузки.</p></details>
        <details class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm open:shadow-md dark:border-slate-700 dark:bg-slate-800"><summary class="cursor-pointer font-medium">Можно ли обучаться дистанционно?</summary><p class="mt-2 text-slate-600 dark:text-slate-300">Да: теория и разбор кейсов — онлайн. Практика и сканирование — очно.</p></details>
        <details class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm open:shadow-md dark:border-slate-700 dark:bg-slate-800"><summary class="cursor-pointer font-medium">Выдаёте ли документы о повышении квалификации?</summary><p class="mt-2 text-slate-600 dark:text-slate-300">Да, по итогам программ ДПО (48–72 ч) — удостоверение установленного образца.</p></details>
        <details class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm open:shadow-md dark:border-slate-700 dark:bg-slate-800"><summary class="cursor-pointer font-medium">Берёте проекты под НИР/НИОКР?</summary><p class="mt-2 text-slate-600 dark:text-slate-300">Да, оформляем задачи как исследовательские проекты: публикации, отчёты.</p></details>
        <details class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm open:shadow-md dark:border-slate-700 dark:bg-slate-800"><summary class="cursor-pointer font-medium">Как оставить заявку?</summary><p class="mt-2 text-slate-600 dark:text-slate-300">Нажмите «Оставить заявку» и заполните форму — мы свяжемся.</p></details>
      </div>
    </div>
  </section>

  </main>

  <!-- Контакты + карта -->
  <footer id="contacts" class="py-16 md:py-24 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid md:grid-cols-2 gap-10 items-center">
        <div>
          <h2 class="text-3xl md:text-4xl font-bold">Контакты</h2>
          <a href="https://yandex.ru/maps/-/CDfFP6~b" target="_blank" rel="noreferrer" class="mt-4 inline-flex items-start gap-3 rounded-2xl px-3 py-3 transition hover:text-slate-900 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-violet-500">
            <span class="mt-1 inline-flex size-3 rounded-full bg-violet-500"></span>
            <span>
              <span class="block text-sm uppercase tracking-wide text-slate-500">САО · Хорошёвский район</span>
              <span class="block font-semibold text-lg text-slate-900 dark:text-slate-100">Москва, ул. Беговая, д. 12</span>
            </span>
          </a>
          <div class="mt-6 flex flex-wrap gap-3">
            <button class="inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-3 text-white font-medium shadow hover:bg-slate-800 focus:outline-none focus:ring-4 focus:ring-slate-300" id="openModal2">Оставить заявку</button>
            <a href="https://t.me/step_3d_mngr" target="_blank" rel="noreferrer" class="inline-flex items-center gap-2 rounded-xl bg-white dark:bg-slate-800 px-5 py-3 border border-slate-200 dark:border-slate-700 font-medium shadow-sm hover:shadow focus:outline-none focus:ring-4 focus:ring-slate-200 dark:focus:ring-slate-700">Написать нам в телеграм</a>
            <a href="mailto:projects.step3d@gmail.com" class="contact-email inline-flex items-center gap-2 rounded-xl px-5 py-3 font-medium transition focus:outline-none focus:ring-4 focus:ring-slate-200 dark:focus:ring-slate-600">
              <svg viewBox="0 0 24 24" class="h-5 w-5" aria-hidden><path d="M4 6h16a1 1 0 011 1v10a1 1 0 01-1 1H4a1 1 0 01-1-1V7a1 1 0 011-1zm0 0l8 6 8-6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M5 18l5.5-4.125" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M19 18l-5.5-4.125" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
              projects.step3d@gmail.com
            </a>
          </div>
        </div>
        <div class="rounded-3xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-6 shadow-soft">
          <h3 class="text-lg font-semibold mb-4">Оставить заявку</h3>
          <form id="inlineRequestForm" class="grid gap-3">
            <label class="grid gap-1 text-sm">
              <span>Имя</span>
              <input required name="name" autocomplete="name" class="rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 outline-none focus:ring-4 focus:ring-slate-200 dark:focus:ring-slate-700">
            </label>
            <label class="grid gap-1 text-sm">
              <span>Телефон</span>
              <input required name="phone" autocomplete="tel" inputmode="tel" data-phone class="rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 outline-none focus:ring-4 focus:ring-slate-200 dark:focus:ring-slate-700">
            </label>
            <label class="grid gap-1 text-sm">
              <span>Email</span>
              <input type="email" name="email" autocomplete="email" class="rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 outline-none focus:ring-4 focus:ring-slate-200 dark:focus:ring-slate-700">
            </label>
            <label class="grid gap-1 text-sm">
              <span>Комментарий</span>
              <textarea rows="3" name="comment" class="rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 outline-none focus:ring-4 focus:ring-slate-200 dark:focus:ring-slate-700" placeholder="Опишите задачу, сроки, ссылки"></textarea>
            </label>
            <label class="flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400">
              <input required type="checkbox" name="consent" value="true" class="h-4 w-4">
              <span>Согласен(а) на обработку персональных данных</span>
            </label>
            <div data-form-status class="hidden rounded-xl border px-3 py-2 text-sm font-medium"></div>
            <button type="submit" class="mt-2 inline-flex justify-center rounded-xl bg-slate-900 px-4 py-2 text-white font-medium hover:bg-slate-800 focus:outline-none focus:ring-4 focus:ring-slate-300 dark:focus:ring-slate-600">Оставить заявку</button>
          </form>
          <div class="mt-6 rounded-2xl bg-slate-50 dark:bg-slate-900/50 p-4 text-sm text-slate-700 dark:text-slate-300">
            <div class="font-semibold text-slate-900 dark:text-slate-100">Москва, ул. Беговая, д. 12</div>
            <div>Лаборатория промдизайна (2 этаж), лаборатория робототехники (1 этаж)</div>
          </div>
          <div class="mt-4 text-sm text-slate-500 dark:text-slate-400">© <span id="y"></span> Технопарк РГСУ</div>
        </div>
      </div>
    </div>

    <!-- Microsoft‑style footer -->
    <div class="border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 mt-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="grid sm:grid-cols-2 md:grid-cols-4 gap-8">
          <div><div class="text-sm font-semibold mb-3">Продукты</div><ul class="space-y-2 text-sm"><li><a href="#services" class="hover:underline">CAD/CAE‑моделирование</a></li><li><a href="#services" class="hover:underline">Реверсивный инжиниринг</a></li><li><a href="#services" class="hover:underline">Аддитивное производство</a></li><li><a href="#services" class="hover:underline">Прототипирование</a></li></ul></div>
          <div><div class="text-sm font-semibold mb-3">Образование</div><ul class="space-y-2 text-sm"><li><a href="#courses" class="hover:underline">Курсы ДПО</a></li><li><a href="#courses" class="hover:underline">Проектные школы</a></li><li><a href="#courses" class="hover:underline">Силлабусы</a></li><li><a href="#contacts" class="hover:underline">Заявка на обучение</a></li></ul></div>
          <div><div class="text-sm font-semibold mb-3">Сеть 3D-печати</div><ul class="space-y-2 text-sm"><li><a href="#equipment" class="hover:underline">FDM‑принтеры</a></li><li><a href="#equipment" class="hover:underline">DLP/SLA‑принтеры</a></li><li><a href="#equipment" class="hover:underline">GenAI + Open Source</a></li></ul></div>
          <div><div class="text-sm font-semibold mb-3">Ресурсы</div><ul class="space-y-2 text-sm text-slate-500 dark:text-slate-300"><li><span class="block">Методические материалы</span></li><li><span class="block">3D‑модели (STP)</span></li><li><span class="block">Политика данных</span></li><li><span class="block">Блог</span></li></ul></div>
        </div>
        <div class="mt-10 flex flex-wrap items-center justify-between gap-4 text-xs text-slate-500 dark:text-slate-400">
          <div class="flex flex-wrap gap-3 text-slate-500 dark:text-slate-400"><span>Конфиденциальность</span><span>Условия использования</span><span>Cookies</span><a href="#contacts" class="hover:underline text-slate-600 dark:text-slate-300">Контакты</a></div>
          <div class="flex items-center gap-2"><span aria-hidden>🌐</span><select class="rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-2 py-1"><option>Русский (RU)</option><option>English (EN)</option></select></div>
        </div>
        <div class="mt-6 text-xs text-slate-500 dark:text-slate-400">© <span id="y2"></span> Step3D.Lab · Все права защищены</div>
      </div>
    </div>
  </footer>

  <!-- Модальное окно заявки -->
  <div id="modal" class="fixed inset-0 z-[60] hidden items-center justify-center p-4" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div id="modalBg" class="absolute inset-0 bg-black/40"></div>
    <div class="relative w-full max-w-lg rounded-2xl bg-white dark:bg-slate-900 p-6 shadow-2xl border border-slate-200 dark:border-slate-700" role="document">
      <h3 class="text-xl font-semibold" id="modalTitle">Оставить заявку</h3>
      <p class="text-slate-600 dark:text-slate-300 mt-1">Заполните контакты — мы свяжемся и обсудим задачу.</p>
      <form id="requestForm" class="mt-4 grid gap-3" novalidate>
        <input type="text" name="company" class="hidden" tabindex="-1" autocomplete="off" aria-hidden>
        <label class="grid gap-1 text-sm"><span>Цель обращения</span>
          <select name="type" required class="rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 outline-none focus:ring-4 focus:ring-slate-200 dark:focus:ring-slate-700">
            <option value="course">Запись на курс</option>
            <option value="service">Заказ услуги</option>
            <option value="partner">Сотрудничество</option>
          </select>
        </label>
        <label class="grid gap-1 text-sm"><span>Имя</span><input required autocomplete="name" class="rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 outline-none focus:ring-4 focus:ring-slate-200 dark:focus:ring-slate-700" name="name"></label>
        <label class="grid gap-1 text-sm"><span>Телефон</span><input required autocomplete="tel" inputmode="tel" data-phone class="rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 outline-none focus:ring-4 focus:ring-slate-200 dark:focus:ring-slate-700" name="phone"></label>
        <label class="grid gap-1 text-sm"><span>Email</span><input type="email" autocomplete="email" class="rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 outline-none focus:ring-4 focus:ring-slate-200 dark:focus:ring-slate-700" name="email"></label>
        <label class="grid gap-1 text-sm"><span>Комментарий</span><textarea rows="3" class="rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 outline-none focus:ring-4 focus:ring-slate-200 dark:focus:ring-slate-700" name="comment" placeholder="Опишите задачу, сроки, ссылки"></textarea></label>
        <div class="flex items-center gap-2 text-sm"><input id="agree" name="consent" value="true" required type="checkbox" class="h-4 w-4"><label for="agree">Согласен(а) на обработку персональных данных</label></div>
        <div data-form-status class="hidden rounded-xl border px-3 py-2 text-sm font-medium"></div>
        <div class="mt-2 flex gap-3"><button class="rounded-xl bg-slate-900 text-white px-4 py-2 hover:bg-slate-800" type="submit">Оставить заявку</button><button class="rounded-xl border border-slate-300 dark:border-slate-700 px-4 py-2" type="button" id="closeModal">Отмена</button></div>
      </form>
    </div>
  </div>

  <div id="toast" class="pointer-events-none fixed inset-x-0 top-4 z-[80] hidden px-4">
    <div class="mx-auto flex max-w-md items-center gap-3 rounded-2xl px-4 py-3 text-sm font-medium shadow-2xl" data-toast-body></div>
  </div>

  <!-- Секции для навигации (для автоподсветки) -->
  <div id="nav-data" class="hidden" data-nav='[{"id":"playground","label":"Игровая зона"},{"id":"services","label":"Возможности"},{"id":"equipment","label":"Сеть 3D-печати"},{"id":"courses","label":"Обучение"},{"id":"team","label":"Команда"},{"id":"faq","label":"FAQ (часто задаваемые вопросы)"},{"id":"contacts","label":"Контакты"}]'></div>

  <script>
    function initInvaders(THREE, { canvas, section }) {
      if (!THREE || !canvas || !section) return null

      const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true })
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))
      const scene = new THREE.Scene()
      const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 100)
      camera.position.set(0, 0.8, 6)

      const ambient = new THREE.AmbientLight(0xffffff, 0.9)
      scene.add(ambient)

      const dir = new THREE.DirectionalLight(0xffffff, 0.4)
      dir.position.set(2, 3, 2)
      scene.add(dir)

      function onResize() {
        const { width, height } = section.getBoundingClientRect()
        renderer.setSize(width, height, false)
        camera.aspect = width / height
        camera.updateProjectionMatrix()
      }
      window.addEventListener('resize', onResize, { passive: true })
      onResize()

      let seed = 42
      function rand() { seed = (seed * 1664525 + 1013904223) % 4294967296; return seed / 4294967296 }
      function lerp(a, b, t) { return a + (b - a) * t }
      const TAU = Math.PI * 2

      function makeInvaderTexture({ fg = '#0b3a5b', glow = '#74b6ff', scale = 6 }) {
        const mask = [
          '00111000000',
          '01111100000',
          '11111110000',
          '11011011000',
          '11111111100',
          '01011001000',
          '00100100000',
          '01000001000'
        ]
        const w = mask[0].length, h = mask.length
        const cw = w * scale, ch = h * scale

        const c = document.createElement('canvas')
        c.width = cw; c.height = ch
        const ctx = c.getContext('2d')

        const g = ctx.createRadialGradient(cw / 2, ch / 2, scale, cw / 2, ch / 2, cw)
        g.addColorStop(0, glow + 'aa')
        g.addColorStop(1, 'rgba(255,255,255,0)')
        ctx.fillStyle = g
        ctx.fillRect(0, 0, cw, ch)

        ctx.fillStyle = fg
        for (let y = 0; y < h; y++) {
          for (let x = 0; x < w; x++) {
            if (mask[y][x] === '1') {
              ctx.fillRect(x * scale, y * scale, scale, scale)
              ctx.fillRect((w - 1 - x) * scale, y * scale, scale, scale)
            }
          }
        }
        return new THREE.CanvasTexture(c)
      }

      const COLORS = [
        ['#0b3a5b', '#74b6ff'],
        ['#004d3f', '#6ff0c4'],
        ['#4b0051', '#d7a1ff'],
        ['#5b2a00', '#ffc98a']
      ]

      function makeInvaderMesh(colorPair) {
        const tex = makeInvaderTexture({ fg: colorPair[0], glow: colorPair[1], scale: 8 })
        const mat = new THREE.SpriteMaterial({ map: tex, depthWrite: false, transparent: true, opacity: 0.96, color: 0xffffff })
        const sprite = new THREE.Sprite(mat)
        sprite.scale.set(0.9, 0.9, 0.9)
        sprite.userData = { baseScale: 0.9 }
        return sprite
      }

      const INVADERS = []
      const COUNT = 14
      for (let i = 0; i < COUNT; i++) {
        const c = COLORS[i % COLORS.length]
        const s = makeInvaderMesh(c)
        const r = lerp(1.4, 3.2, rand())
        const speed = lerp(0.12, 0.32, rand()) * (rand() > 0.5 ? 1 : -1)
        const phase = rand() * TAU
        const height = lerp(-0.6, 0.7, rand())
        const wobble = lerp(0.06, 0.18, rand())
        s.position.set(0, height, -lerp(0.5, 2.0, rand()))
        s.userData.orbit = { r, speed, phase, wobble, height }
        scene.add(s)
        INVADERS.push(s)
      }

      const ARCS = []
      function spawnArc(a, b) {
        const segments = 14
        const positions = new Float32Array((segments + 1) * 3)
        const start = a.position.clone()
        const end = b.position.clone()
        const dir = end.clone().sub(start)
        const len = dir.length()
        for (let i = 0; i <= segments; i++) {
          const t = i / segments
          const p = start.clone().addScaledVector(dir, t)
          const n = new THREE.Vector3(-dir.y, dir.x, 0).normalize()
            .multiplyScalar((Math.sin(t * TAU * 2 + rand() * 2) * 0.05 + (rand() - 0.5) * 0.06) * (0.6 + 0.4 * Math.sin(len * 1.7)))
          p.add(n)
          positions[i * 3 + 0] = p.x
          positions[i * 3 + 1] = p.y
          positions[i * 3 + 2] = p.z + 0.01
        }
        const geom = new THREE.BufferGeometry()
        geom.setAttribute('position', new THREE.BufferAttribute(positions, 3))
        const mat = new THREE.LineBasicMaterial({ color: 0x99ccff, transparent: true, opacity: 0.9 })
        const line = new THREE.Line(geom, mat)
        scene.add(line)

        const mid = start.clone().lerp(end, 0.5)
        const sparks = makeSparks(mid, 24)
        scene.add(sparks)

        ARCS.push({ line, mat, life: 0.18, sparks })
      }

      function makeSparks(center, count) {
        const geom = new THREE.BufferGeometry()
        const positions = new Float32Array(count * 3)
        const velocities = []
        for (let i = 0; i < count; i++) {
          positions[i * 3 + 0] = center.x
          positions[i * 3 + 1] = center.y
          positions[i * 3 + 2] = center.z + 0.02
          const v = new THREE.Vector3((rand() - 0.5) * 0.9, (rand() - 0.2) * 1.2, (rand() - 0.5) * 0.2).multiplyScalar(0.6)
          velocities.push(v)
        }
        geom.setAttribute('position', new THREE.BufferAttribute(positions, 3))
        const mat = new THREE.PointsMaterial({ color: 0xffffff, size: 0.035, transparent: true, opacity: 1 })
        const pts = new THREE.Points(geom, mat)
        pts.userData.velocities = velocities
        pts.userData.life = 0.5
        return pts
      }

      let t0 = performance.now() / 1000
      let rafId = null
      function tick() {
        const t = performance.now() / 1000
        const dt = Math.min(0.033, t - t0)
        t0 = t

        INVADERS.forEach((s) => {
          const { r, speed, phase, wobble, height } = s.userData.orbit
          const ang = phase + t * speed
          const x = Math.cos(ang) * r
          const y = height + Math.sin(ang * 1.9) * wobble
          const z = s.position.z
          s.position.set(x, y, z)
          const scale = s.userData.baseScale * (1 + Math.sin(ang * 2.3) * 0.06)
          s.scale.set(scale, scale, scale)
          s.material.rotation = Math.sin(ang * 1.3) * 0.15
        })

        if (Math.random() < 0.02) {
          const a = INVADERS[Math.floor(Math.random() * INVADERS.length)]
          let b = INVADERS[Math.floor(Math.random() * INVADERS.length)]
          if (a !== b && a.position.distanceTo(b.position) < 3.2) {
            spawnArc(a, b)
          }
        }

        for (let i = ARCS.length - 1; i >= 0; i--) {
          const arc = ARCS[i]
          arc.life -= dt
          arc.mat.opacity = Math.max(0, arc.life / 0.18)
          if (arc.sparks) {
            const pts = arc.sparks
            pts.userData.life -= dt
            const pos = pts.geometry.attributes.position
            for (let j = 0; j < pts.userData.velocities.length; j++) {
              const v = pts.userData.velocities[j]
              v.y -= 0.98 * dt * 0.3
              pos.array[j * 3 + 0] += v.x * dt
              pos.array[j * 3 + 1] += v.y * dt
              pos.array[j * 3 + 2] += v.z * dt
            }
            pts.material.opacity = Math.max(0, pts.userData.life / 0.5)
            pos.needsUpdate = true
            if (pts.userData.life <= 0) {
              scene.remove(pts)
              arc.sparks = null
            }
          }
          if (arc.life <= 0) {
            scene.remove(arc.line)
            arc.line.geometry.dispose()
            ARCS.splice(i, 1)
          }
        }

        renderer.render(scene, camera)
        rafId = requestAnimationFrame(tick)
      }

      function start() {
        if (rafId !== null) return
        t0 = performance.now() / 1000
        rafId = requestAnimationFrame(tick)
      }

      function stop() {
        if (rafId === null) return
        cancelAnimationFrame(rafId)
        rafId = null
      }

      window.addEventListener('beforeunload', () => {
        stop()
        renderer.dispose()
        INVADERS.forEach((s) => s.material.map.dispose())
      }, { once: true })

      return { start, stop }
    }

    (() => {
      const section = document.getElementById('invaders-hero')
      const canvas = document.getElementById('invaders-canvas')
      if (!section || !canvas) return

      const reduceMotionQuery = window.matchMedia('(prefers-reduced-motion: reduce)')
      if (reduceMotionQuery.matches) return

      let controller = null
      let loadingPromise = null

      const ensureController = () => {
        if (controller) return Promise.resolve(controller)
        if (loadingPromise) return loadingPromise

        loadingPromise = import('https://unpkg.com/three@0.160.0/build/three.module.js')
          .then((module) => {
            const THREE = module.default ?? module
            controller = initInvaders(THREE, { canvas, section })
            return controller
          })
          .finally(() => {
            loadingPromise = null
          })

        return loadingPromise
      }

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.target !== section) return
          if (entry.isIntersecting) {
            ensureController()
              .then((ctrl) => ctrl && ctrl.start())
              .catch((error) => console.error('Не удалось инициализировать сцену Invaders', error))
          } else if (controller) {
            controller.stop()
          }
        })
      }, { threshold: 0.25 })

      observer.observe(section)

      const actionButton = document.getElementById('heroAction')
      if (actionButton) {
        actionButton.addEventListener('click', () => {
          ensureController().catch(() => {})
        })
      }
    })()
  </script>

  <script>
    // ===== Игровая зона
    (() => {
      const playground = document.querySelector('[data-playground]')
      if (!playground) return

      const container = playground.querySelector('[data-experience-target]')
      const buttons = Array.from(playground.querySelectorAll('[data-experience-mode]'))
      if (!container || !buttons.length) return

      const statOrbital = document.querySelector('[data-stat-orbital]')
      const statReaction = document.querySelector('[data-stat-reaction]')
      const statChallenge = document.querySelector('[data-stat-challenge]')

      const STORAGE_KEY = 'step3d-playground-state-v1'
      let storageEnabled = true

      const readState = () => {
        if (!storageEnabled) return null
        try {
          const raw = window.localStorage.getItem(STORAGE_KEY)
          return raw ? JSON.parse(raw) : null
        } catch (error) {
          storageEnabled = false
          return null
        }
      }

      const writeState = (payload) => {
        if (!storageEnabled) return
        try {
          window.localStorage.setItem(STORAGE_KEY, JSON.stringify(payload))
        } catch (error) {
          storageEnabled = false
        }
      }

      const restoredState = readState()

      const stats = {
        orbitalBest: null,
        reactionBest: null,
        challengeOpened: 0
      }

      if (restoredState?.stats) {
        if (typeof restoredState.stats.orbitalBest === 'number') {
          stats.orbitalBest = restoredState.stats.orbitalBest
        }
        if (typeof restoredState.stats.reactionBest === 'number') {
          stats.reactionBest = restoredState.stats.reactionBest
        }
        if (typeof restoredState.stats.challengeOpened === 'number') {
          stats.challengeOpened = restoredState.stats.challengeOpened
        }
      }

      let currentMode = typeof restoredState?.mode === 'string' ? restoredState.mode : null

      const persistState = () => {
        if (!storageEnabled) return
        writeState({
          mode: currentMode,
          stats: {
            orbitalBest: stats.orbitalBest,
            reactionBest: stats.reactionBest,
            challengeOpened: stats.challengeOpened
          }
        })
      }

      const getUrlModeCandidate = () => {
        try {
          const url = new URL(window.location.href)
          return url.searchParams.get('playground')
        } catch (error) {
          return null
        }
      }

      const syncUrlMode = (mode) => {
        if (!history.replaceState) return
        try {
          const url = new URL(window.location.href)
          if (mode) url.searchParams.set('playground', mode)
          else url.searchParams.delete('playground')
          history.replaceState(null, '', url.toString())
        } catch (error) {
          // ignore URL sync errors
        }
      }

      const randomBetween = (min, max) => min + Math.random() * (max - min)

      const pickNextIndex = (pool, currentIndex) => {
        if (!pool.length) return -1
        if (pool.length === 1) return 0
        let next = currentIndex
        while (next === currentIndex) {
          next = Math.floor(Math.random() * pool.length)
        }
        return next
      }

      const createChip = (text, variant = 'slate') => {
        const span = document.createElement('span')
        const baseClass = 'playground-chip'
        let modifier = 'playground-chip--slate'
        if (variant === 'emerald') modifier = 'playground-chip--emerald'
        else if (variant === 'sky') modifier = 'playground-chip--sky'
        span.className = `${baseClass} ${modifier}`
        span.textContent = text
        return span
      }

      const safeClipboardCopy = async (text) => {
        if (!text) return false
        try {
          if (navigator.clipboard && typeof navigator.clipboard.writeText === 'function') {
            await navigator.clipboard.writeText(text)
            return true
          }
        } catch (error) {
          // fallback ниже
        }

        const area = document.createElement('textarea')
        area.value = text
        area.setAttribute('readonly', '')
        area.style.position = 'fixed'
        area.style.top = '-1000px'
        document.body.appendChild(area)
        area.select()
        let success = false
        try {
          success = document.execCommand('copy')
        } catch (error) {
          success = false
        }
        document.body.removeChild(area)
        return success
      }

      const updateStats = () => {
        if (statOrbital) {
          statOrbital.textContent = stats.orbitalBest != null ? `${stats.orbitalBest} очков` : '—'
        }
        if (statReaction) {
          statReaction.textContent = stats.reactionBest != null ? `${stats.reactionBest.toFixed(3)} с` : '—'
        }
        if (statChallenge) {
          statChallenge.textContent = String(stats.challengeOpened)
        }
        persistState()
      }

      const challengePool = [
        {
          title: 'Оптимизируйте кронштейн для аддитивного производства',
          summary: 'Есть литой алюминиевый кронштейн массой 420 г. Переспроектируйте его под печать на порошковом принтере, сохранив жёсткость и снизив массу минимум на 25%.',
          difficulty: 'Средний уровень · CAD + топология',
          focus: 'Прочность и AM',
          time: '45 минут на концепт',
          tags: ['Topology', 'AM', 'CAD'],
          hints: [
            'Соберите нагрузки в одном сценарии и закрепите зоны посадочных поверхностей.',
            'Используйте ограничение по минимальной толщине ребра и направлению печати при топологической оптимизации.',
            'Сравните моды деформации до и после оптимизации и подготовьте отчёт о жёсткости.'
          ],
          link: { label: 'Кейс Airbus APWorks', url: 'https://apworks.de/topology-optimization-case-study/' },
          highlight: 'Ориентир: масса 290–310 г при коэффициенте безопасности ≥ 1.4.'
        },
        {
          title: 'Реверс-инжиниринг корпуса квадрокоптера',
          summary: 'Есть сетка сканирования верхней оболочки дрона после полевых испытаний. Требуется восстановить CAD-модель с соблюдением симметрии и посадочных мест.',
          difficulty: 'Практика реверс-инжиниринга',
          focus: 'Сканирование + CAD',
          time: '60 минут на препроцессинг',
          tags: ['3D Scan', 'Geomagic', 'QA'],
          hints: [
            'Очистите шум, разделите сетку на зоны симметрии и используйте инструменты выравнивания.',
            'Создайте базовые поверхности и контрольные сечения, затем постройте NURBS-поверхности.',
            'Сверьте отверстия и плоскости креплений с исходной моделью через отчёт отклонений.'
          ],
          link: { label: 'Руководство Geomagic Design X', url: 'https://www.3dsystems.com/sites/default/files/2017/2016-design-x-tutorial.pdf' },
          highlight: 'Цель — отклонение не более ±0.2 мм на ключевых интерфейсах.'
        },
        {
          title: 'Цифровой двойник редуктора для VR-демонстрации',
          summary: 'Нужно подготовить упрощённый цифровой двойник редуктора для VR-презентации заказчику. Важно сохранить кинематику и габариты, но уменьшить полигональность.',
          difficulty: 'Продуктовый кейс',
          focus: 'CAD + визуализация',
          time: '40 минут на прототип',
          tags: ['Digital Twin', 'Visualization', 'VR'],
          hints: [
            'Соберите иерархию компонентов и задайте ограничения для вращений и сцепления зубьев.',
            'Экспортируйте модель в glTF/USDZ с оптимизацией LOD и baked-материалами.',
            'Добавьте анимацию раскрытия и пояснения ключевых этапов демонстрации.'
          ],
          link: { label: 'Пример workflow NVIDIA Omniverse', url: 'https://www.nvidia.com/en-us/omniverse/workflows/digital-twins/' },
          highlight: 'Максимум 150k полигонов при сохранении ключевых сопряжений.'
        }
      ]

      const bookPool = [
        {
          title: 'Fabricated: The New World of 3D Printing',
          meta: 'Hod Lipson · Melba Kurman · Wiley, 2013',
          description: 'Как аддитивные технологии меняют производство и продуктовые команды: кейсы промышленности, образования и медицины.',
          tags: ['Additive', 'Strategy', 'Case studies'],
          link: 'https://www.wiley.com/en-us/Fabricated%3A+The+New+World+of+3D+Printing-p-9781118350638',
          linkLabel: 'Читать на Wiley',
          image: 'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?auto=format&fit=crop&w=1200&q=80',
          highlight: 'Подходит тимлидам, которые внедряют 3D-печать в реальный производственный поток.'
        },
        {
          title: 'Designing Reality',
          meta: 'Neil · Alan · Joel Gershenfeld · Basic Books, 2017',
          description: 'FabLab-движение и влияние персонального производства на образование и бизнес, истории становления лабораторий.',
          tags: ['FabLab', 'Education', 'Future'],
          link: 'https://www.basicbooks.com/titles/neil-gershenfeld/designing-reality/9780465093476/',
          linkLabel: 'Basic Books',
          image: 'https://images.unsplash.com/photo-1489515217757-5fd1be406fef?auto=format&fit=crop&w=1200&q=80',
          highlight: 'Хорошая база для обсуждения стратегии технопарка и университетских лабораторий.'
        },
        {
          title: 'Additive Manufacturing Technologies',
          meta: 'Ian Gibson · David Rosen · Brent Stucker · Springer, 2021',
          description: 'Подробный справочник по процессам AM, материалам, постобработке и экономике внедрения.',
          tags: ['Reference', 'Engineering', 'AM'],
          link: 'https://link.springer.com/book/10.1007/978-3-030-56127-7',
          linkLabel: 'SpringerLink',
          image: 'https://images.unsplash.com/photo-1581091870627-3af6c6f1b3f5?auto=format&fit=crop&w=1200&q=80',
          highlight: 'Настольное пособие для инженеров и преподавателей программ ДПО.'
        }
      ]

      const filmPool = [
        {
          title: 'Print the Legend',
          meta: 'Документальный фильм · 2014 · Netflix',
          description: 'История MakerBot и Formlabs — от гаражных стартапов до борьбы за лидерство на рынке настольной 3D-печати.',
          tags: ['Documentary', 'Startup', '3D Printing'],
          link: 'https://www.netflix.com/title/70270362',
          linkLabel: 'Netflix',
          image: 'https://images.unsplash.com/photo-1527430253228-e93688616381?auto=format&fit=crop&w=1200&q=80',
          highlight: 'Отличный повод обсудить бизнес-стратегии и рост продуктовых команд.'
        },
        {
          title: 'General Magic',
          meta: 'Документальный фильм · 2018 · Directed by Sarah Kerruish & Matt Maude',
          description: 'Команда General Magic задолго до iPhone разработала концепт смартфона. Фильм о мечтах инженеров и управлении инновациями.',
          tags: ['Product Design', 'Innovation', 'Teamwork'],
          link: 'https://www.generalmagicthefilm.com/',
          linkLabel: 'Официальный сайт',
          image: 'https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fit=crop&w=1200&q=80',
          highlight: 'Помогает выстроить культуру экспериментов и осознанных рисков в R&D.'
        },
        {
          title: 'The Farthest',
          meta: 'Документальный фильм · 2017 · PBS',
          description: 'Программа Voyager: инженерные решения, межпланетная навигация и работа над задачами десятилетней сложности.',
          tags: ['Space', 'Systems Engineering', 'Documentary'],
          link: 'https://www.pbs.org/program/farthest-voyagers-interstellar-mission/',
          linkLabel: 'PBS',
          image: 'https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?auto=format&fit=crop&w=1200&q=80',
          highlight: 'Вдохновляет на проекты длинного цикла и тщательные инженерные расчёты.'
        }
      ]

      const setActiveButton = (targetButton) => {
        buttons.forEach((button, index) => {
          const isActive = button === targetButton
          if (isActive) {
            button.dataset.active = 'true'
            button.setAttribute('aria-selected', 'true')
            button.tabIndex = 0
          } else {
            delete button.dataset.active
            button.setAttribute('aria-selected', 'false')
            button.tabIndex = -1
          }
        })
      }

      const initOrbital = (root) => {
        root.innerHTML = `
          <article class="playground-card" data-mode="orbital">
            <div class="playground-card__header">
              <div>
                <span class="playground-chip playground-chip--emerald">Arcade</span>
                <h3 class="playground-title">Орбитальный охотник</h3>
                <p class="playground-copy">Ловите светящиеся сферы кликом или касанием. Каждая серия ускоряет игру.</p>
              </div>
              <div class="playground-card__metrics">
                <div>
                  <div class="playground-meta">Счёт</div>
                  <div class="playground-metric-value" data-orbital-score>0</div>
                </div>
                <div>
                  <div class="playground-meta">Время</div>
                  <div class="playground-metric-value"><span data-orbital-timer>30.0</span> с</div>
                </div>
              </div>
            </div>
            <div class="playground-canvas">
              <canvas data-orbital-canvas aria-label="Игровое поле Орбитальный охотник"></canvas>
            </div>
            <p class="playground-status" data-orbital-status aria-live="polite">Нажмите «Старт игры», чтобы запустить тренировку внимания.</p>
            <div class="playground-card__cta">
              <button type="button" class="primary" data-orbital-start>Старт игры</button>
              <button type="button" class="secondary" data-orbital-reset>Сбросить</button>
            </div>
            <p class="playground-copy">Совет: предугадывайте траекторию сферы и держите курсор ближе к центру — так проще собрать серию.</p>
          </article>
        `

        const canvas = root.querySelector('[data-orbital-canvas]')
        const scoreEl = root.querySelector('[data-orbital-score]')
        const timerEl = root.querySelector('[data-orbital-timer]')
        const statusEl = root.querySelector('[data-orbital-status]')
        const startButton = root.querySelector('[data-orbital-start]')
        const resetButton = root.querySelector('[data-orbital-reset]')
        if (!canvas || !scoreEl || !timerEl || !statusEl || !startButton || !resetButton) return null

        const ctx = canvas.getContext('2d')
        const wrapper = canvas.parentElement
        const stars = []
        const orbs = []
        const sparks = []
        const ORB_COUNT = 8
        const DURATION = 30
        const startPrompt = 'Нажмите «Старт игры», чтобы запустить тренировку внимания.'

        let width = 0
        let height = 0
        let running = false
        let score = 0
        let remaining = DURATION
        let frameId = null
        let lastTimestamp = 0
        let combo = 0
        let comboTimer = 0

        const resize = () => {
          const rect = (wrapper ?? canvas).getBoundingClientRect()
          const ratio = window.devicePixelRatio || 1
          const cssWidth = Math.max(rect.width, 320)
          const cssHeight = Math.max(rect.height, 220)
          canvas.width = cssWidth * ratio
          canvas.height = cssHeight * ratio
          ctx.setTransform(ratio, 0, 0, ratio, 0, 0)
          width = cssWidth
          height = cssHeight
        }

        const initStars = () => {
          stars.length = 0
          const count = 30
          for (let i = 0; i < count; i++) {
            stars.push({
              x: Math.random(),
              y: Math.random(),
              speed: randomBetween(0.12, 0.45),
              size: randomBetween(1, 2.4)
            })
          }
        }

        const spawnOrbs = () => {
          orbs.length = 0
          for (let i = 0; i < ORB_COUNT; i++) {
            orbs.push({
              x: randomBetween(36, width - 36),
              y: randomBetween(36, height - 36),
              vx: randomBetween(60, 130) * (Math.random() > 0.5 ? 1 : -1),
              vy: randomBetween(60, 130) * (Math.random() > 0.5 ? 1 : -1),
              radius: randomBetween(16, 24),
              phase: Math.random() * Math.PI * 2
            })
          }
        }

        const spawnSparks = (x, y) => {
          const count = 12
          for (let i = 0; i < count; i++) {
            sparks.push({
              x,
              y,
              vx: randomBetween(-160, 160),
              vy: randomBetween(-160, -40),
              size: randomBetween(2, 4),
              color: i % 2 === 0 ? 'rgba(96, 165, 250, 0.9)' : 'rgba(16, 185, 129, 0.9)',
              life: 0.6,
              maxLife: 0.6
            })
          }
        }

        const drawScene = (dt) => {
          ctx.fillStyle = '#020617'
          ctx.fillRect(0, 0, width, height)

          const bg = ctx.createLinearGradient(0, 0, width, height)
          bg.addColorStop(0, 'rgba(15, 118, 110, 0.45)')
          bg.addColorStop(1, 'rgba(37, 99, 235, 0.55)')
          ctx.fillStyle = bg
          ctx.fillRect(0, 0, width, height)

          for (let i = 0; i < stars.length; i++) {
            const star = stars[i]
            star.y += star.speed * dt * 14
            if (star.y > 1) {
              star.y = 0
              star.x = Math.random()
            }
            ctx.globalAlpha = 0.4 + star.speed * 0.5
            ctx.fillStyle = '#e0f2fe'
            ctx.fillRect(star.x * width, star.y * height, star.size, star.size)
          }
          ctx.globalAlpha = 1

          for (let i = 0; i < orbs.length; i++) {
            const orb = orbs[i]
            orb.x += orb.vx * dt
            orb.y += orb.vy * dt

            if (orb.x < orb.radius) { orb.x = orb.radius; orb.vx *= -1 }
            else if (orb.x > width - orb.radius) { orb.x = width - orb.radius; orb.vx *= -1 }
            if (orb.y < orb.radius) { orb.y = orb.radius; orb.vy *= -1 }
            else if (orb.y > height - orb.radius) { orb.y = height - orb.radius; orb.vy *= -1 }

            orb.phase += dt * 3.2
            const energy = (Math.sin(orb.phase) + 1) * 0.5
            const radius = orb.radius * (1 + energy * 0.22)
            const gradient = ctx.createRadialGradient(orb.x, orb.y, orb.radius * 0.24, orb.x, orb.y, radius)
            gradient.addColorStop(0, 'rgba(165, 243, 252, 0.95)')
            gradient.addColorStop(0.5, 'rgba(56, 189, 248, 0.85)')
            gradient.addColorStop(1, 'rgba(14, 165, 233, 0.08)')
            ctx.fillStyle = gradient
            ctx.beginPath()
            ctx.arc(orb.x, orb.y, radius, 0, Math.PI * 2)
            ctx.fill()

            ctx.strokeStyle = 'rgba(165, 243, 252, 0.35)'
            ctx.lineWidth = 1.1
            ctx.beginPath()
            ctx.arc(orb.x, orb.y, radius + 4, 0, Math.PI * 2)
            ctx.stroke()
          }

          for (let i = sparks.length - 1; i >= 0; i--) {
            const spark = sparks[i]
            spark.life -= dt
            if (spark.life <= 0) {
              sparks.splice(i, 1)
              continue
            }
            spark.x += spark.vx * dt
            spark.y += spark.vy * dt
            spark.vy += 180 * dt
            const alpha = Math.max(0, spark.life / spark.maxLife)
            ctx.globalAlpha = alpha
            ctx.fillStyle = spark.color
            ctx.fillRect(spark.x, spark.y, spark.size, spark.size)
            ctx.globalAlpha = 1
          }

          if (comboTimer > 0 && combo >= 2) {
            comboTimer = Math.max(0, comboTimer - dt)
            ctx.font = '600 26px "Inter", "Segoe UI", sans-serif'
            ctx.fillStyle = 'rgba(165, 243, 252, 0.92)'
            ctx.fillText(`×${combo}`, width - 64, 40)
            if (comboTimer <= 0) combo = 0
          }
        }

        const stopLoop = () => {
          if (frameId) {
            cancelAnimationFrame(frameId)
            frameId = null
          }
        }

        const finishGame = () => {
          running = false
          stopLoop()
          startButton.disabled = false
          startButton.textContent = 'Сыграть ещё раз'
          const message = `Финиш! Вы набрали ${score} очков.`
          if (stats.orbitalBest === null || score > stats.orbitalBest) {
            stats.orbitalBest = score
            statusEl.textContent = `${message} Новый личный рекорд!`
          } else {
            statusEl.textContent = message
          }
          updateStats()
        }

        const loop = (timestamp) => {
          if (!running) return
          if (!lastTimestamp) lastTimestamp = timestamp
          const dt = Math.min(0.032, (timestamp - lastTimestamp) / 1000)
          lastTimestamp = timestamp
          remaining = Math.max(0, remaining - dt)
          timerEl.textContent = remaining.toFixed(1)
          drawScene(dt)
          if (remaining <= 0) {
            finishGame()
            return
          }
          frameId = requestAnimationFrame(loop)
        }

        const resetGame = (announce = true) => {
          running = false
          stopLoop()
          lastTimestamp = 0
          score = 0
          remaining = DURATION
          combo = 0
          comboTimer = 0
          timerEl.textContent = remaining.toFixed(1)
          scoreEl.textContent = '0'
          startButton.disabled = false
          startButton.textContent = 'Старт игры'
          sparks.length = 0
          initStars()
          spawnOrbs()
          drawScene(0)
          statusEl.textContent = announce ? 'Раунд сброшен. Готовы к новому старту.' : startPrompt
        }

        const startGame = () => {
          if (running) return
          running = true
          score = 0
          remaining = DURATION
          lastTimestamp = 0
          combo = 0
          comboTimer = 0
          timerEl.textContent = remaining.toFixed(1)
          scoreEl.textContent = '0'
          statusEl.textContent = 'Раунд запущен! Ловите сферы и собирайте серию.'
          startButton.disabled = true
          startButton.textContent = 'Идёт раунд…'
          frameId = requestAnimationFrame(loop)
        }

        const handlePointer = (event) => {
          if (!running) return
          const rect = canvas.getBoundingClientRect()
          const x = event.clientX - rect.left
          const y = event.clientY - rect.top
          let hit = false
          for (let i = 0; i < orbs.length; i++) {
            const orb = orbs[i]
            const dx = x - orb.x
            const dy = y - orb.y
            const radius = orb.radius + 6
            if (dx * dx + dy * dy <= radius * radius) {
              hit = true
              score += 1
              combo += 1
              comboTimer = 1.4
              scoreEl.textContent = String(score)
              statusEl.textContent = combo >= 3 ? `Комбо ×${combo}! Ускоряйтесь.` : 'Попадание! +1 очко.'
              orb.x = randomBetween(orb.radius, width - orb.radius)
              orb.y = randomBetween(orb.radius, height - orb.radius)
              const boost = 1 + Math.min(combo, 6) * 0.08
              orb.vx = randomBetween(70, 150) * (Math.random() > 0.5 ? 1 : -1) * boost
              orb.vy = randomBetween(70, 150) * (Math.random() > 0.5 ? 1 : -1) * boost
              spawnSparks(x, y)
              break
            }
          }
          if (!hit) {
            combo = 0
            statusEl.textContent = 'Мимо! Попробуйте предугадать траекторию.'
          }
        }

        resize()
        initStars()
        spawnOrbs()
        drawScene(0)
        timerEl.textContent = remaining.toFixed(1)

        const resizeObserver = typeof ResizeObserver === 'function'
          ? new ResizeObserver(() => {
              resize()
              drawScene(0)
            })
          : null

        if (resizeObserver) {
          resizeObserver.observe(wrapper ?? canvas)
        } else {
          window.addEventListener('resize', resize)
        }

        const handleReset = () => resetGame(true)

        startButton.addEventListener('click', startGame)
        resetButton.addEventListener('click', handleReset)
        canvas.addEventListener('pointerdown', handlePointer)

        resetGame(false)

        return () => {
          running = false
          stopLoop()
          startButton.removeEventListener('click', startGame)
          resetButton.removeEventListener('click', handleReset)
          canvas.removeEventListener('pointerdown', handlePointer)
          if (resizeObserver) {
            resizeObserver.disconnect()
          } else {
            window.removeEventListener('resize', resize)
          }
        }
      }

      const initReaction = (root) => {
        root.innerHTML = `
          <article class="playground-card" data-mode="reaction">
            <div class="playground-card__header">
              <div>
                <span class="playground-chip playground-chip--sky">Focus</span>
                <h3 class="playground-title">Поймай сигнал</h3>
                <p class="playground-copy">Дождитесь подсветки площадки и нажмите максимально быстро — тренируйте реакцию и концентрацию.</p>
              </div>
              <div class="playground-card__metrics">
                <div>
                  <div class="playground-meta">Попыток</div>
                  <div class="playground-metric-value" data-react-count>0</div>
                </div>
                <div>
                  <div class="playground-meta">Лучший результат</div>
                  <div class="playground-metric-value" data-react-best>—</div>
                </div>
              </div>
            </div>
            <div class="playground-pad" data-state="idle" data-react-pad tabindex="0" role="button" aria-label="Игровое поле реакции">
              <div data-react-label>Нажмите «Старт»</div>
            </div>
            <div class="playground-card__cta">
              <button type="button" class="primary" data-react-start>Старт</button>
              <button type="button" class="secondary" data-react-reset>Сбросить</button>
            </div>
            <p class="playground-status" data-react-status aria-live="polite">Готовы к новой попытке.</p>
            <div class="playground-history">
              <div class="playground-meta">История замеров</div>
              <ul data-react-history aria-live="polite" aria-label="Последние результаты"></ul>
            </div>
          </article>
        `

        const pad = root.querySelector('[data-react-pad]')
        const startButton = root.querySelector('[data-react-start]')
        const resetButton = root.querySelector('[data-react-reset]')
        const statusEl = root.querySelector('[data-react-status]')
        const labelEl = root.querySelector('[data-react-label]')
        const countEl = root.querySelector('[data-react-count]')
        const bestEl = root.querySelector('[data-react-best]')
        const historyEl = root.querySelector('[data-react-history]')
        if (!pad || !startButton || !resetButton || !statusEl || !labelEl || !countEl || !bestEl || !historyEl) return null

        let state = 'idle'
        let waitTimeout = null
        let settleTimeout = null
        let startTime = 0
        let attempts = 0
        const history = []

        const clearTimers = () => {
          if (waitTimeout) {
            clearTimeout(waitTimeout)
            waitTimeout = null
          }
          if (settleTimeout) {
            clearTimeout(settleTimeout)
            settleTimeout = null
          }
        }

        const updateHistory = () => {
          historyEl.innerHTML = ''
          const recent = history.slice(-5).reverse()
          recent.forEach((entry) => {
            const li = document.createElement('li')
            const spanAttempt = document.createElement('span')
            spanAttempt.textContent = `#${entry.attempt}`
            const spanValue = document.createElement('span')
            spanValue.textContent = `${entry.value.toFixed(3)} с`
            li.append(spanAttempt, spanValue)
            historyEl.appendChild(li)
          })
        }

        const updateBestLabel = () => {
          bestEl.textContent = stats.reactionBest != null ? `${stats.reactionBest.toFixed(3)} с` : '—'
        }

        updateHistory()
        updateBestLabel()

        const setPadState = (value) => {
          pad.dataset.state = value
        }

        const finishAttempt = (reaction) => {
          attempts += 1
          history.push({ attempt: attempts, value: reaction })
          countEl.textContent = String(attempts)
          if (stats.reactionBest === null || reaction < stats.reactionBest) {
            stats.reactionBest = reaction
            statusEl.textContent = `🔥 ${reaction.toFixed(3)} с — новый рекорд!`
            updateBestLabel()
          } else {
            statusEl.textContent = `Реакция: ${reaction.toFixed(3)} с.`
          }
          updateStats()
          updateHistory()
          setPadState('idle')
          labelEl.textContent = `${reaction.toFixed(3)} с`
          state = 'finished'
          startButton.disabled = false
          startButton.textContent = 'Ещё попытка'
          settleTimeout = window.setTimeout(() => {
            if (state === 'finished') {
              labelEl.textContent = 'Нажмите «Старт»'
              setPadState('idle')
              state = 'idle'
            }
          }, 1500)
        }

        const startRound = () => {
          clearTimers()
          state = 'waiting'
          setPadState('waiting')
          labelEl.textContent = 'Ждём сигнал…'
          statusEl.textContent = 'Не кликайте, пока площадка не загорится.'
          startButton.disabled = true
          startButton.textContent = 'Ожидание…'
          waitTimeout = window.setTimeout(() => {
            state = 'ready'
            setPadState('ready')
            labelEl.textContent = 'ЖМИ!'
            statusEl.textContent = 'Сработайте как можно быстрее.'
            startTime = performance.now()
          }, randomBetween(1400, 3200))
        }

        const handlePad = () => {
          if (state === 'waiting') {
            clearTimers()
            setPadState('early')
            labelEl.textContent = 'Рано!'
            statusEl.textContent = 'Фальстарт. Попробуйте ещё раз.'
            startButton.disabled = false
            startButton.textContent = 'Старт'
            state = 'idle'
            settleTimeout = window.setTimeout(() => {
              if (state === 'idle') {
                setPadState('idle')
                labelEl.textContent = 'Нажмите «Старт»'
              }
            }, 1200)
            return
          }
          if (state === 'ready') {
            clearTimers()
            const reaction = (performance.now() - startTime) / 1000
            finishAttempt(reaction)
            return
          }
          if (state === 'idle') {
            statusEl.textContent = 'Сначала запустите раунд кнопкой «Старт».'
          }
        }

        const handleStart = () => {
          if (state === 'waiting') return
          if (state === 'ready') return
          clearTimers()
          setPadState('idle')
          labelEl.textContent = 'Готовьтесь…'
          startRound()
        }

        const handleReset = () => {
          clearTimers()
          state = 'idle'
          attempts = 0
          history.length = 0
          countEl.textContent = '0'
          labelEl.textContent = 'Нажмите «Старт»'
          setPadState('idle')
          statusEl.textContent = 'Сброс выполнен. Готовы к новой серии.'
          startButton.disabled = false
          startButton.textContent = 'Старт'
          updateHistory()
          updateBestLabel()
        }

        const handlePadPointer = (event) => {
          event.preventDefault()
          handlePad()
        }
        const handlePadKey = (event) => {
          if (event.key === ' ' || event.key === 'Enter') {
            event.preventDefault()
            handlePad()
          }
        }
        pad.addEventListener('pointerdown', handlePadPointer)
        pad.addEventListener('keydown', handlePadKey)
        startButton.addEventListener('click', handleStart)
        resetButton.addEventListener('click', handleReset)

        return () => {
          clearTimers()
          pad.removeEventListener('pointerdown', handlePadPointer)
          pad.removeEventListener('keydown', handlePadKey)
          startButton.removeEventListener('click', handleStart)
          resetButton.removeEventListener('click', handleReset)
        }
      }

      const initChallenge = (root) => {
        root.innerHTML = `
          <article class="playground-card" data-mode="challenge">
            <div class="playground-card__header">
              <div>
                <span class="playground-chip playground-chip--slate">Challenge</span>
                <h3 class="playground-title">Задача дня</h3>
                <p class="playground-copy">Практический кейс Step3D.Lab — обсудите его с командой или решите прямо сейчас.</p>
              </div>
              <div class="playground-card__metrics">
                <div>
                  <div class="playground-meta">Сложность</div>
                  <div class="playground-metric-value" data-challenge-difficulty>—</div>
                </div>
                <div>
                  <div class="playground-meta">Фокус</div>
                  <div class="playground-metric-value" data-challenge-focus>—</div>
                </div>
              </div>
            </div>
            <div class="playground-task">
              <h4 data-challenge-title></h4>
              <p class="playground-copy" data-challenge-summary></p>
              <div class="playground-task__meta">
                <span data-challenge-time></span>
                <span data-challenge-note></span>
              </div>
              <div class="playground-tags" data-challenge-tags></div>
              <div class="playground-hints">
                <div class="playground-meta">Подсказки</div>
                <ul data-challenge-hints></ul>
              </div>
            </div>
            <div class="playground-card__cta">
              <button type="button" class="primary" data-challenge-next>Новая задача</button>
              <button type="button" class="secondary" data-challenge-copy>Скопировать</button>
              <a class="secondary" data-challenge-link target="_blank" rel="noopener">Источник</a>
            </div>
            <p class="playground-status" data-challenge-status aria-live="polite"></p>
          </article>
        `

        const titleEl = root.querySelector('[data-challenge-title]')
        const summaryEl = root.querySelector('[data-challenge-summary]')
        const difficultyEl = root.querySelector('[data-challenge-difficulty]')
        const focusEl = root.querySelector('[data-challenge-focus]')
        const timeEl = root.querySelector('[data-challenge-time]')
        const noteEl = root.querySelector('[data-challenge-note]')
        const tagsEl = root.querySelector('[data-challenge-tags]')
        const hintsEl = root.querySelector('[data-challenge-hints]')
        const nextButton = root.querySelector('[data-challenge-next]')
        const copyButton = root.querySelector('[data-challenge-copy]')
        const linkEl = root.querySelector('[data-challenge-link]')
        const statusEl = root.querySelector('[data-challenge-status]')
        if (!titleEl || !summaryEl || !difficultyEl || !focusEl || !timeEl || !noteEl || !tagsEl || !hintsEl || !nextButton || !copyButton || !linkEl || !statusEl) return null

        let currentIndex = -1

        const render = (item, announce = false) => {
          titleEl.textContent = item.title
          summaryEl.textContent = item.summary
          difficultyEl.textContent = item.difficulty ?? '—'
          focusEl.textContent = item.focus ?? (item.tags?.[0] ?? '—')
          timeEl.textContent = item.time ?? ''
          noteEl.textContent = item.highlight ?? ''

          tagsEl.innerHTML = ''
          ;(item.tags ?? []).forEach((tag, index) => {
            const variant = index === 0 ? 'emerald' : index === 1 ? 'sky' : 'slate'
            tagsEl.appendChild(createChip(tag, variant))
          })

          hintsEl.innerHTML = ''
          ;(item.hints ?? []).forEach((hint) => {
            const li = document.createElement('li')
            li.textContent = hint
            hintsEl.appendChild(li)
          })

          if (item.link && item.link.url) {
            linkEl.href = item.link.url
            linkEl.textContent = item.link.label ?? 'Источник'
            linkEl.classList.remove('is-disabled')
            linkEl.removeAttribute('aria-disabled')
            linkEl.hidden = false
          } else {
            linkEl.href = '#'
            linkEl.textContent = 'Источник'
            linkEl.classList.add('is-disabled')
            linkEl.setAttribute('aria-disabled', 'true')
            linkEl.hidden = true
          }

          statusEl.textContent = announce ? 'Новая задача загружена.' : (item.highlight ?? '')
        }

        const showNext = (announce = true) => {
          currentIndex = pickNextIndex(challengePool, currentIndex)
          if (currentIndex === -1) return
          render(challengePool[currentIndex], announce)
          stats.challengeOpened += 1
          updateStats()
        }

        const handleCopy = async () => {
          if (currentIndex === -1) return
          const item = challengePool[currentIndex]
          const text = [
            item.title,
            item.summary,
            '',
            'Подсказки:',
            ...(item.hints ?? [])
          ].join('\n')
          const success = await safeClipboardCopy(text)
          statusEl.textContent = success
            ? 'Кейс скопирован в буфер обмена — обсудите его с командой.'
            : 'Не удалось скопировать. Скопируйте текст вручную.'
        }

        const handleNext = () => showNext(true)
        nextButton.addEventListener('click', handleNext)
        copyButton.addEventListener('click', handleCopy)

        showNext(false)

        return () => {
          nextButton.removeEventListener('click', handleNext)
          copyButton.removeEventListener('click', handleCopy)
        }
      }

      const initRecommendation = (root, items, { type }) => {
        root.innerHTML = `
          <article class="playground-card playground-card--media" data-mode="${type}">
            <div class="playground-media" data-reco-visual>
              <span class="playground-chip ${type === 'book' ? 'playground-chip--sky' : 'playground-chip--emerald'}">${type === 'book' ? 'Book club' : 'Cinema'}</span>
              <h3 class="playground-title" data-reco-title></h3>
              <p class="playground-meta" data-reco-meta></p>
              <p class="playground-copy" data-reco-description></p>
              <div class="playground-tags" data-reco-tags></div>
            </div>
            <div class="playground-card__cta">
              <a class="primary" data-reco-link target="_blank" rel="noopener">${type === 'book' ? 'Читать' : 'Смотреть'}</a>
              <button type="button" class="secondary" data-reco-next>Следующая рекомендация</button>
              <button type="button" class="secondary" data-reco-share>Скопировать</button>
            </div>
            <p class="playground-status" data-reco-status aria-live="polite"></p>
          </article>
        `

        const visual = root.querySelector('[data-reco-visual]')
        const titleEl = root.querySelector('[data-reco-title]')
        const metaEl = root.querySelector('[data-reco-meta]')
        const descEl = root.querySelector('[data-reco-description]')
        const tagsEl = root.querySelector('[data-reco-tags]')
        const linkEl = root.querySelector('[data-reco-link]')
        const nextButton = root.querySelector('[data-reco-next]')
        const shareButton = root.querySelector('[data-reco-share]')
        const statusEl = root.querySelector('[data-reco-status]')
        if (!visual || !titleEl || !metaEl || !descEl || !tagsEl || !linkEl || !nextButton || !shareButton || !statusEl) return null

        let currentIndex = -1

        const render = () => {
          const item = items[currentIndex]
          visual.classList.remove('playground-media--book', 'playground-media--film')
          visual.classList.add(`playground-media--${type}`)
          if (item.image) {
            visual.style.setProperty('--playground-media-image', `url('${item.image}')`)
          } else {
            visual.style.removeProperty('--playground-media-image')
          }
          titleEl.textContent = item.title
          metaEl.textContent = item.meta ?? ''
          descEl.textContent = item.description ?? ''
          tagsEl.innerHTML = ''
          ;(item.tags ?? []).forEach((tag, index) => {
            const variant = index % 2 === 0 ? 'emerald' : 'sky'
            tagsEl.appendChild(createChip(tag, variant))
          })
          if (item.link) {
            linkEl.href = item.link
            linkEl.textContent = item.linkLabel ?? (type === 'book' ? 'Читать' : 'Смотреть')
            linkEl.classList.remove('is-disabled')
            linkEl.removeAttribute('aria-disabled')
            linkEl.hidden = false
          } else {
            linkEl.href = '#'
            linkEl.textContent = type === 'book' ? 'Читать' : 'Смотреть'
            linkEl.classList.add('is-disabled')
            linkEl.setAttribute('aria-disabled', 'true')
            linkEl.hidden = true
          }
          statusEl.textContent = item.highlight ?? 'Новая рекомендация готова.'
        }

        const showNext = () => {
          currentIndex = pickNextIndex(items, currentIndex)
          if (currentIndex === -1) return
          render()
        }

        const handleShare = async () => {
          if (currentIndex === -1) return
          const item = items[currentIndex]
          const payload = item.link ? `${item.title} — ${item.link}` : item.title
          const success = await safeClipboardCopy(payload)
          statusEl.textContent = success
            ? 'Ссылка скопирована — делитесь с коллегами.'
            : 'Не получилось скопировать ссылку. Попробуйте вручную.'
        }

        nextButton.addEventListener('click', showNext)
        shareButton.addEventListener('click', handleShare)

        showNext()

        return () => {
          nextButton.removeEventListener('click', showNext)
          shareButton.removeEventListener('click', handleShare)
        }
      }

      const modeFactories = {
        orbital: initOrbital,
        reaction: initReaction,
        challenge: initChallenge,
        book: (root) => initRecommendation(root, bookPool, { type: 'book' }),
        film: (root) => initRecommendation(root, filmPool, { type: 'film' })
      }

      const availableModes = buttons
        .map((btn) => btn.dataset.experienceMode)
        .filter((value) => typeof value === 'string' && value.length)

      let teardown = null

      const setMode = (mode, { focusButton = false } = {}) => {
        if (!mode) return
        const targetButton = buttons.find((btn) => btn.dataset.experienceMode === mode)
        if (!targetButton) return
        container.dataset.mode = mode
        const isAlreadyActive = targetButton.dataset.active === 'true' && container.childElementCount > 0
        if (isAlreadyActive) {
          if (focusButton) targetButton.focus()
          currentMode = mode
          persistState()
          syncUrlMode(mode)
          return
        }
        if (typeof teardown === 'function') {
          teardown()
          teardown = null
        }
        setActiveButton(targetButton)
        if (focusButton) {
          targetButton.focus()
        }
        container.innerHTML = ''
        const factory = modeFactories[mode]
        teardown = typeof factory === 'function' ? factory(container) : null
        currentMode = mode
        persistState()
        syncUrlMode(mode)
      }

      buttons.forEach((button, index) => {
        button.tabIndex = index === 0 ? 0 : -1
        button.addEventListener('click', () => setMode(button.dataset.experienceMode))
        button.addEventListener('keydown', (event) => {
          if (event.key === 'ArrowRight' || event.key === 'ArrowDown') {
            event.preventDefault()
            const next = buttons[(index + 1) % buttons.length]
            next.focus()
            setMode(next.dataset.experienceMode)
          } else if (event.key === 'ArrowLeft' || event.key === 'ArrowUp') {
            event.preventDefault()
            const prev = buttons[(index - 1 + buttons.length) % buttons.length]
            prev.focus()
            setMode(prev.dataset.experienceMode)
          } else if (event.key === 'Home') {
            event.preventDefault()
            const first = buttons[0]
            first.focus()
            setMode(first.dataset.experienceMode)
          } else if (event.key === 'End') {
            event.preventDefault()
            const last = buttons[buttons.length - 1]
            last.focus()
            setMode(last.dataset.experienceMode)
          }
        })
      })

      window.addEventListener('popstate', () => {
        const modeFromUrl = getUrlModeCandidate()
        const fallbackMode = availableModes[0] ?? null
        const nextMode = modeFromUrl && availableModes.includes(modeFromUrl) ? modeFromUrl : fallbackMode
        if (nextMode && nextMode !== currentMode) {
          setMode(nextMode, { focusButton: true })
        }
      })

      const urlMode = getUrlModeCandidate()
      if (!availableModes.includes(currentMode)) {
        currentMode = null
      }

      let initialMode = availableModes[0] ?? null
      if (urlMode && availableModes.includes(urlMode)) {
        initialMode = urlMode
      } else if (currentMode && availableModes.includes(currentMode)) {
        initialMode = currentMode
      }

      currentMode = initialMode
      updateStats()
      if (initialMode) {
        setMode(initialMode)
      }
    })()

    // ===== Hero showcase trigger
    (() => {
      const action = document.getElementById('heroAction')
      const showcase = document.getElementById('heroShowcase')
      if (!action || !showcase) return

      const labels = ['Дальше!', 'Вперёд!', 'Старт!', 'Пуск!']
      let lastLabel = ''
      const nextLabel = () => {
        const pool = labels.filter((label) => label !== lastLabel)
        const label = pool[Math.floor(Math.random() * pool.length)]
        lastLabel = label
        return label
      }

      const svgData = (svg) => `data:image/svg+xml;utf8,${encodeURIComponent(svg.trim())}`
      const heroSlides = [
        {
          type: 'image',
          title: '3D‑сканирование и оцифровка',
          description: 'Лидар и проектор собирают облако точек, создавая точную цифровую копию изделия.',
          alt: 'Силуэт лазерного сканера и облака точек детали',
          src: svgData(`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 240">
              <defs>
                <linearGradient id="gScan" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0" stop-color="#0ea5e9"/>
                  <stop offset="1" stop-color="#22c55e"/>
                </linearGradient>
              </defs>
              <rect width="400" height="240" rx="28" fill="#f1f5f9"/>
              <g fill="none" stroke="#0f172a" stroke-opacity="0.28">
                <path d="M40 192h320" stroke-width="2" stroke-dasharray="6 8"/>
                <path d="M100 68c48-32 152-32 200 0" stroke-width="1.5"/>
              </g>
              <g fill="url(#gScan)" fill-opacity="0.72">
                <circle cx="86" cy="110" r="4"/>
                <circle cx="120" cy="126" r="5"/>
                <circle cx="150" cy="144" r="6"/>
                <circle cx="214" cy="132" r="5"/>
                <circle cx="244" cy="118" r="4"/>
                <circle cx="276" cy="132" r="6"/>
                <circle cx="302" cy="150" r="5"/>
                <circle cx="328" cy="166" r="4"/>
                <circle cx="190" cy="160" r="7"/>
              </g>
              <path d="M80 176h76l30-70 58 54 22-44 54 60" fill="none" stroke="#0f172a" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
              <g fill="#0f172a" fill-opacity="0.7">
                <rect x="60" y="60" width="44" height="48" rx="10"/>
                <rect x="300" y="74" width="44" height="32" rx="8"/>
              </g>
              <path d="M76 60 108 28l28 32" fill="none" stroke="#0ea5e9" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          `)
        },
        {
          type: 'image',
          title: 'Роботизированная сборка',
          description: 'Координатный манипулятор шаг за шагом выстраивает технологическую оснастку.',
          alt: 'Роботизированный манипулятор собирает конструкцию',
          src: svgData(`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 240">
              <rect width="400" height="240" rx="28" fill="#e0f2fe"/>
              <path d="M110 178h200" stroke="#0f172a" stroke-opacity="0.35" stroke-width="6" stroke-linecap="round"/>
              <g fill="none" stroke="#0f172a" stroke-width="6" stroke-linecap="round" stroke-linejoin="round">
                <path d="M132 172V88l54-38 50 42-32 42 56 38 42-22" stroke="#0f172a" stroke-opacity="0.8"/>
                <path d="M186 50 210 26l32 28" stroke="#22c55e"/>
              </g>
              <g fill="#0ea5e9" fill-opacity="0.85">
                <circle cx="132" cy="172" r="16"/>
                <circle cx="186" cy="94" r="18"/>
                <circle cx="240" cy="136" r="18"/>
                <circle cx="296" cy="112" r="16"/>
              </g>
              <rect x="156" y="176" width="88" height="32" rx="10" fill="#0f172a" fill-opacity="0.8"/>
              <rect x="248" y="176" width="72" height="24" rx="8" fill="#1e293b" fill-opacity="0.65"/>
              <path d="M138 200h124" stroke="#bae6fd" stroke-width="4" stroke-dasharray="12 12" stroke-linecap="round"/>
            </svg>
          `)
        },
        {
          type: 'image',
          title: 'CAD‑проектирование в действии',
          description: 'Экран САПР с параметрической моделью и графиком нагрузок для проверки прочности.',
          alt: 'Экран CAD с 3D‑моделью и графиками нагрузок',
          src: svgData(`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 240">
              <rect width="400" height="240" rx="28" fill="#e2e8f0"/>
              <rect x="52" y="44" width="296" height="156" rx="18" fill="#0f172a" fill-opacity="0.88"/>
              <rect x="64" y="60" width="272" height="124" rx="14" fill="#f8fafc"/>
              <path d="M84 172h232" stroke="#94a3b8" stroke-width="3" stroke-linecap="round"/>
              <path d="M96 150c34-28 52-54 96-54s70 28 112 52" fill="none" stroke="#22c55e" stroke-width="4" stroke-linecap="round"/>
              <path d="M96 150c24-12 52-24 96-24s84 12 112 24" fill="none" stroke="#0ea5e9" stroke-width="3" stroke-dasharray="10 8"/>
              <g fill="#0ea5e9" fill-opacity="0.9">
                <circle cx="140" cy="98" r="10"/>
                <circle cx="180" cy="122" r="8"/>
                <circle cx="220" cy="94" r="9"/>
                <circle cx="264" cy="128" r="11"/>
              </g>
              <path d="M142 96l36-30 48 32 46-22" fill="none" stroke="#1e293b" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
              <rect x="96" y="70" width="52" height="10" rx="3" fill="#0ea5e9" fill-opacity="0.4"/>
              <rect x="156" y="70" width="112" height="10" rx="3" fill="#22c55e" fill-opacity="0.4"/>
              <rect x="272" y="70" width="40" height="10" rx="3" fill="#f97316" fill-opacity="0.45"/>
            </svg>
          `)
        },
        {
          type: 'text',
          kind: 'riddle',
          title: 'Загадка инженерам',
          description: 'Без кисти и красок создаёт формы, послойно выводит идею из цифры в предмет. Что это?',
          meta: 'Ответ: аддитивный 3D‑принтер — слой за слоем материализует проект.'
        },
        {
          type: 'text',
          kind: 'quote',
          title: 'Цитата для вдохновения',
          description: '«Инженерия — это способность делать для трёх рублей то, что любой может сделать за десять.»',
          meta: 'Томас Эдисон'
        },
        {
          type: 'text',
          kind: 'recommendation',
          title: 'Что почитать/посмотреть',
          description: 'Книга Дональда Нормана «Дизайн привычных вещей» и фильм «Скрытые фигуры» — про инженерное мышление и команду мечты.',
          meta: 'Рекомендуем для расширения кругозора и проектного взгляда.'
        }
      ]

      const render = (item) => {
        if (item.type === 'image') {
          showcase.innerHTML = `
            <article class="hero-card" data-kind="image">
              <figure><img src="${item.src}" alt="${item.alt}"></figure>
              <div>
                <h3>${item.title}</h3>
                <p>${item.description}</p>
              </div>
            </article>
          `
        } else {
          showcase.innerHTML = `
            <article class="hero-card" data-kind="${item.kind ?? 'text'}">
              <h3>${item.title}</h3>
              <p>${item.description}</p>
              ${item.meta ? `<footer>${item.meta}</footer>` : ''}
            </article>
          `
        }
        const isDark = document.documentElement.classList.contains('dark')
        showcase.classList.toggle('dark', isDark)
      }

      let index = 0
      render(heroSlides[index])
      action.textContent = nextLabel()

      action.addEventListener('click', () => {
        index = (index + 1) % heroSlides.length
        render(heroSlides[index])
        action.textContent = nextLabel()
      })

      const observer = new MutationObserver(() => {
        const isDark = document.documentElement.classList.contains('dark')
        showcase.classList.toggle('dark', isDark)
      })
      observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] })
    })()

    // ===== Динамическое меню (desktop + mobile)
    const navData = JSON.parse(document.getElementById('nav-data').dataset.nav)
    const linksWrap = document.getElementById('links')
    const mobileWrap = document.getElementById('mobile')
    const mobileMenu = document.getElementById('mobileMenu')
    const burger = document.getElementById('burger')
    const mobileOverlay = mobileMenu?.querySelector('[data-menu-overlay]')
    const mobilePanel = mobileMenu?.querySelector('[data-menu-panel]')
    const mobileClose = mobileMenu?.querySelector('[data-menu-close]')
    const focusableSelector = 'a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])'
    mobileMenu?.setAttribute('aria-hidden', 'true')

    function getFocusable(root){
      if(!root) return []
      return Array.from(root.querySelectorAll(focusableSelector)).filter(el => !el.hasAttribute('disabled') && el.getAttribute('tabindex') !== '-1' && (el.offsetParent !== null || el.getBoundingClientRect().width > 0 || el.getBoundingClientRect().height > 0))
    }

    function trapFocus(container, event){
      if(event.key !== 'Tab') return
      const focusable = getFocusable(container)
      if(!focusable.length) return
      const first = focusable[0]
      const last = focusable[focusable.length - 1]
      if(event.shiftKey && document.activeElement === first){
        event.preventDefault()
        last.focus()
      } else if(!event.shiftKey && document.activeElement === last){
        event.preventDefault()
        first.focus()
      }
    }

    let mobileFocusReturn = null

    function openMobileMenu(){
      if(!mobileMenu) return
      mobileFocusReturn = document.activeElement instanceof HTMLElement ? document.activeElement : null
      mobileMenu.classList.remove('hidden')
      requestAnimationFrame(()=>{
        mobileMenu.dataset.open = 'true'
        mobileMenu.setAttribute('aria-hidden', 'false')
      })
      burger?.setAttribute('aria-expanded', 'true')
      document.body.classList.add('overflow-hidden')
      const focusTarget = getFocusable(mobilePanel ?? mobileMenu).find(el => el.getAttribute('role') === 'menuitem') ?? getFocusable(mobilePanel ?? mobileMenu)[0]
      focusTarget?.focus({ preventScroll: true })
      mobileMenu.addEventListener('keydown', handleMobileKeydown)
    }

    function closeMobileMenu({ restoreFocus = true } = {}){
      if(!mobileMenu || mobileMenu.classList.contains('hidden')) return
      delete mobileMenu.dataset.open
      mobileMenu.setAttribute('aria-hidden', 'true')
      const panel = mobilePanel
      let finished = false
      const finish = () => {
        if(finished) return
        finished = true
        mobileMenu.classList.add('hidden')
      }
      if(panel){
        const onEnd = (event) => {
          if(event.propertyName === 'transform') finish()
        }
        panel.addEventListener('transitionend', onEnd, { once: true })
        setTimeout(finish, 280)
      } else {
        finish()
      }
      burger?.setAttribute('aria-expanded', 'false')
      document.body.classList.remove('overflow-hidden')
      mobileMenu.removeEventListener('keydown', handleMobileKeydown)
      if(restoreFocus && mobileFocusReturn){
        mobileFocusReturn.focus({ preventScroll: true })
      }
    }

    function handleMobileKeydown(event){
      if(event.key === 'Escape'){
        event.preventDefault()
        closeMobileMenu()
        return
      }
      trapFocus(mobilePanel ?? mobileMenu, event)
    }

    function renderLinks(container, variant){
      const anchors = Array.from(container.querySelectorAll('a'))
      const classDesktop = 'px-3 py-2 rounded-xl text-sm font-medium hover:bg-slate-100 dark:hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400'
      const classMobile = 'flex items-center justify-between rounded-2xl border border-slate-200 dark:border-slate-700 bg-white/90 dark:bg-slate-800/80 px-4 py-3 text-base font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400'

      navData.forEach(({ id, label }, index) => {
        let a = anchors[index]
        if(!a){
          a = document.createElement('a')
          container.appendChild(a)
        }
        a.href = `#${id}`
        a.textContent = label

        if(variant === 'desktop'){
          a.className = classDesktop
          a.removeAttribute('role')
        } else {
          a.className = classMobile
          a.setAttribute('role', 'menuitem')
          if(!a.dataset.closeListener){
            a.addEventListener('click', () => closeMobileMenu({ restoreFocus: false }))
            a.dataset.closeListener = 'true'
          }
        }
      })

      if(anchors.length > navData.length){
        anchors.slice(navData.length).forEach(a => a.remove())
      }
    }

    renderLinks(linksWrap, 'desktop')
    renderLinks(mobileWrap, 'mobile')

    burger?.addEventListener('click', () => {
      if(mobileMenu?.dataset.open === 'true'){
        closeMobileMenu()
      } else {
        openMobileMenu()
      }
    })
    mobileOverlay?.addEventListener('click', () => closeMobileMenu())
    mobileClose?.addEventListener('click', () => closeMobileMenu())

    if(typeof window.matchMedia === 'function'){
      const md = window.matchMedia('(min-width: 768px)')
      const onChange = (event) => { if(event.matches) closeMobileMenu({ restoreFocus: false }) }
      if(md.addEventListener){
        md.addEventListener('change', onChange)
      } else if(md.addListener){
        md.addListener(onChange)
      }
    }

    // ===== Подсветка активного пункта по скроллу
    const sectionIds = navData.map(n=> n.id)
    const anchors = Array.from(document.querySelectorAll('#links a'))
    const mobAnchors = Array.from(document.querySelectorAll('#mobile a'))
    const obs = new IntersectionObserver(entries=>{
      const vis = entries.filter(e=>e.isIntersecting).sort((a,b)=> b.intersectionRatio-a.intersectionRatio)[0]
      if(!vis) return
      const id = vis.target.id
      ;[...anchors, ...mobAnchors].forEach(a=>{ a.classList.toggle('active-link', a.getAttribute('href')===`#${id}`) })
    }, {rootMargin:'-40% 0px -55% 0px', threshold:[0,0.25,0.5,0.75,1]})
    sectionIds.forEach(id=>{ const el = document.getElementById(id); if(el) obs.observe(el) })

    // ===== Прогресс-бар прокрутки
    const progress = document.getElementById('progress')
    document.addEventListener('scroll', ()=>{ const h = document.documentElement; const sc = h.scrollTop / (h.scrollHeight - h.clientHeight); progress.style.transform = `scaleX(${sc})` })

    // ===== Модалка формы и заявки
    const modal = document.getElementById('modal')
    const modalBg = document.getElementById('modalBg')
    const modalCloseBtn = document.getElementById('closeModal')
    const modalContent = modal?.querySelector('[role="document"]')
    const modalForm = document.getElementById('requestForm')
    const inlineForm = document.getElementById('inlineRequestForm')
    const toastRoot = document.getElementById('toast')
    const toastBody = toastRoot?.querySelector('[data-toast-body]')
    const toastVariants = {
      success: ['bg-emerald-600/95', 'text-white'],
      error: ['bg-rose-600/95', 'text-white'],
      info: ['bg-slate-900/95', 'text-white']
    }
    const toastClasses = [...new Set(Object.values(toastVariants).flat())]
    let toastTimer

    function showToast(message, type = 'success'){
      if(!toastRoot || !toastBody) return
      toastBody.textContent = message
      toastBody.classList.remove(...toastClasses)
      toastBody.classList.add(...(toastVariants[type] ?? toastVariants.info))
      toastRoot.classList.remove('hidden')
      clearTimeout(toastTimer)
      toastTimer = window.setTimeout(() => {
        toastRoot.classList.add('hidden')
        toastBody.textContent = ''
        toastBody.classList.remove(...toastClasses)
      }, 4200)
    }

    const statusVariants = {
      loading: ['border-sky-300', 'bg-sky-50', 'text-sky-900', 'dark:border-sky-400/50', 'dark:bg-sky-500/10', 'dark:text-sky-100'],
      success: ['border-emerald-300', 'bg-emerald-50', 'text-emerald-900', 'dark:border-emerald-400/50', 'dark:bg-emerald-500/10', 'dark:text-emerald-100'],
      error: ['border-rose-300', 'bg-rose-50', 'text-rose-900', 'dark:border-rose-500/40', 'dark:bg-rose-500/15', 'dark:text-rose-100']
    }
    const statusClasses = [...new Set(Object.values(statusVariants).flat())]

    function setStatus(box, type, message, { spinner = false } = {}){
      if(!box) return
      box.classList.remove('hidden')
      box.classList.remove(...statusClasses)
      if(statusVariants[type]){
        box.classList.add(...statusVariants[type])
      }
      box.dataset.state = type
      box.setAttribute('role', type === 'error' ? 'alert' : 'status')
      if(spinner){
        box.innerHTML = `<span class="inline-flex items-center gap-2"><span class="h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"></span><span>${message}</span></span>`
      } else {
        box.textContent = message
      }
    }

    function clearStatus(box){
      if(!box) return
      box.classList.add('hidden')
      box.classList.remove(...statusClasses)
      box.textContent = ''
      box.removeAttribute('role')
      delete box.dataset.state
    }

    function setFormDisabled(form, disabled){
      Array.from(form?.elements ?? []).forEach(el => {
        if(!(el instanceof HTMLElement)) return
        if(el.getAttribute('type') === 'button') return
        if('disabled' in el){
          el.disabled = disabled
        }
      })
    }

    function phoneDigits(value){
      return (value || '').replace(/\D/g, '')
    }

    function formatPhone(value){
      const digitsRaw = phoneDigits(value)
      if(!digitsRaw) return ''
      let digits = digitsRaw
      if(digits[0] === '8') digits = '7' + digits.slice(1)
      if(digits[0] !== '7') digits = '7' + digits
      digits = digits.slice(0, 11)
      let result = '+7'
      if(digits.length > 1){
        result += ' (' + digits.slice(1, Math.min(4, digits.length))
        if(digits.length >= 4) result += ')'
      }
      if(digits.length > 4){
        result += ' ' + digits.slice(4, Math.min(7, digits.length))
      }
      if(digits.length > 7){
        result += '-' + digits.slice(7, Math.min(9, digits.length))
      }
      if(digits.length > 9){
        result += '-' + digits.slice(9, Math.min(11, digits.length))
      }
      return result.trim()
    }

    function attachPhoneMask(input){
      if(!input) return
      input.addEventListener('focus', () => {
        if(!input.value) input.value = '+7 '
      })
      input.addEventListener('blur', () => {
        if(phoneDigits(input.value).length <= 1){
          input.value = ''
        } else {
          input.value = formatPhone(input.value)
        }
      })
      input.addEventListener('input', () => {
        const formatted = formatPhone(input.value)
        input.value = formatted
      })
    }

    document.querySelectorAll('input[data-phone]').forEach(input => attachPhoneMask(input))

    async function sendRequest(formData){
      const payload = Object.fromEntries(formData.entries())
      if(payload.company){
        throw new Error('Заявка отклонена как подозрительная.')
      }
      try {
        const response = await fetch('https://httpbin.org/post', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        })
        if(!response.ok){
          throw new Error('Сервер вернул ошибку. Попробуйте позже.')
        }
        return await response.json()
      } catch (error) {
        console.warn('Fallback to mock request', error)
        await new Promise(resolve => setTimeout(resolve, 1400))
        return { ok: true }
      }
    }

    function handleForm(form){
      if(!form) return () => {}
      const statusBox = form.querySelector('[data-form-status]')
      let submitting = false

      form.addEventListener('submit', async (event) => {
        event.preventDefault()
        if(submitting) return
        if(!form.checkValidity()){
          form.reportValidity()
          return
        }
        const phoneInput = form.querySelector('[data-phone]')
        if(phoneInput){
          const digits = phoneDigits(phoneInput.value)
          if(digits.length < 11){
            setStatus(statusBox, 'error', 'Введите полный номер телефона (11 цифр).')
            phoneInput.focus()
            return
          }
        }
        submitting = true
        setFormDisabled(form, true)
        setStatus(statusBox, 'loading', 'Отправляем заявку...', { spinner: true })
        const formData = new FormData(form)
        const phoneInput = form.querySelector('[data-phone]')
        if(phoneInput){
          formData.set(phoneInput.name, phoneInput.value.trim())
          formData.set('phone_digits', phoneDigits(phoneInput.value))
        }
        try {
          await sendRequest(formData)
          setStatus(statusBox, 'success', 'Спасибо! Заявка отправлена.')
          showToast('Заявка успешно отправлена.', 'success')
          form.reset()
          window.setTimeout(() => clearStatus(statusBox), 4000)
        } catch (error) {
          console.error(error)
          setStatus(statusBox, 'error', error?.message ?? 'Не удалось отправить заявку. Попробуйте позже.')
          showToast('Не удалось отправить заявку. Попробуйте ещё раз.', 'error')
        } finally {
          submitting = false
          setFormDisabled(form, false)
        }
      })

      form.addEventListener('reset', () => {
        clearStatus(statusBox)
        const phoneInput = form.querySelector('[data-phone]')
        if(phoneInput){
          phoneInput.value = ''
        }
      })

      return () => clearStatus(statusBox)
    }

    const resetModalStatus = handleForm(modalForm)
    handleForm(inlineForm)

    let modalFocusReturn = null

    function openModal(){
      if(!modal) return
      modalFocusReturn = document.activeElement instanceof HTMLElement ? document.activeElement : null
      modal.classList.remove('hidden')
      modal.classList.add('flex')
      modal.setAttribute('aria-hidden', 'false')
      document.body.classList.add('overflow-hidden')
      const focusTarget = getFocusable(modalContent ?? modal)[0]
      focusTarget?.focus({ preventScroll: true })
      modal.addEventListener('keydown', handleModalKeydown)
    }

    function closeModal(){
      if(!modal) return
      modal.classList.add('hidden')
      modal.classList.remove('flex')
      modal.setAttribute('aria-hidden', 'true')
      document.body.classList.remove('overflow-hidden')
      modal.removeEventListener('keydown', handleModalKeydown)
      resetModalStatus()
      modalForm?.reset()
      if(modalFocusReturn){
        modalFocusReturn.focus({ preventScroll: true })
      }
    }

    function handleModalKeydown(event){
      if(event.key === 'Escape'){
        event.preventDefault()
        closeModal()
        return
      }
      trapFocus(modalContent ?? modal, event)
    }

    document.getElementById('openModal')?.addEventListener('click', openModal)
    document.getElementById('openModal2')?.addEventListener('click', openModal)
    modalCloseBtn?.addEventListener('click', closeModal)
    modalBg?.addEventListener('click', closeModal)
    modal?.addEventListener('click', event => {
      if(event.target === modal){
        closeModal()
      }
    })


    // ===== «О лаборатории» toggle
    (() => {
      const aboutButton = document.getElementById('toggleAbout')
      const aboutBox = document.getElementById('aboutBox')
      if (!aboutButton || !aboutBox) return

      const openLabel = aboutButton.dataset.labelOpen?.trim() || aboutButton.textContent?.trim() || 'О лаборатории'
      const closeLabel = aboutButton.dataset.labelClose?.trim() || 'Свернуть описание'
      const motionMedia = window.matchMedia?.('(prefers-reduced-motion: reduce)')

      let isExpanded = aboutBox.dataset.open === 'true'
      let focusRestore = aboutButton

      const updateHeight = () => {
        const inner = aboutBox.querySelector('[data-about-inner]')
        if (!inner) return
        const height = inner.scrollHeight
        aboutBox.style.setProperty('--about-target', `${height}px`)
      }

      const commitState = (expanded, immediate = false) => {
        const apply = () => {
          aboutBox.dataset.open = expanded ? 'true' : 'false'
        }
        if (immediate || motionMedia?.matches) {
          apply()
        } else {
          requestAnimationFrame(apply)
        }
      }

      const setState = (expanded, { trigger, initial = false } = {}) => {
        isExpanded = expanded

        if (expanded) {
          focusRestore = trigger instanceof HTMLElement
            ? trigger
            : (document.activeElement instanceof HTMLElement ? document.activeElement : aboutButton)
        }

        aboutBox.setAttribute('aria-hidden', String(!expanded))
        aboutButton.setAttribute('aria-expanded', String(expanded))
        aboutButton.dataset.state = expanded ? 'open' : 'closed'
        aboutButton.textContent = expanded ? closeLabel : openLabel

        updateHeight()
        commitState(expanded, initial)

        if (initial) return

        const focusTarget = expanded ? aboutBox : focusRestore
        if (focusTarget && typeof focusTarget.focus === 'function') {
          const delay = motionMedia?.matches ? 0 : 180
          window.setTimeout(() => {
            focusTarget.focus({ preventScroll: true })
          }, delay)
        }
      }

      setState(isExpanded, { initial: true })

      const handleResize = () => {
        if (!isExpanded) return
        updateHeight()
      }

      window.addEventListener('resize', handleResize)

      motionMedia?.addEventListener?.('change', () => {
        if (!isExpanded) return
        updateHeight()
      })

      aboutButton.addEventListener('click', () => {
        setState(!isExpanded, { trigger: aboutButton })
      })

      aboutBox.addEventListener('keydown', (event) => {
        if (event.key === 'Escape' && isExpanded) {
          event.preventDefault()
          setState(false)
        }
      })
    })()

    // ===== Галереи проектов
    function initGalleries(){
      document.querySelectorAll('.js-gallery').forEach(card=>{
        const slides = card.querySelectorAll('.slide')
        const dotsBox = card.querySelector('.js-dots')
        if(!slides.length || !dotsBox) return

        const interval = Number(card.dataset.interval) || 5000
        let timer
        const dots = []

        function setActive(i, { focusDot = false } = {}){
          slides.forEach((s,idx)=> s.classList.toggle('hidden', idx!==i))
          dots.forEach((d,idx)=>{
            const isActive = idx===i
            d.classList.toggle('bg-slate-300', !isActive)
            d.classList.toggle('dark:bg-slate-600', !isActive)
            d.classList.toggle('bg-slate-900', isActive)
            d.classList.toggle('dark:bg-slate-200', isActive)
            d.classList.toggle('is-active', isActive)
            d.setAttribute('aria-pressed', String(isActive))
            d.tabIndex = isActive ? 0 : -1
            if (isActive && focusDot) {
              d.focus({ preventScroll: true })
            }
          })
          card.dataset.index = i
        }

        function next({ focusDot = false } = {}){
          const current = Number(card.dataset.index) || 0
          setActive((current + 1) % slides.length, { focusDot })
        }

        function prev({ focusDot = false } = {}){
          const current = Number(card.dataset.index) || 0
          setActive((current - 1 + slides.length) % slides.length, { focusDot })
        }

        function startAuto(){
          if(card.matches(':focus-within')) return
          stopAuto()
          timer = window.setInterval(next, interval)
        }

        function stopAuto(){
          if(timer){
            window.clearInterval(timer)
            timer = undefined
          }
        }

        dotsBox.innerHTML = ''
        slides.forEach((_,i)=>{
          const dot=document.createElement('button')
          dot.type='button'
          dot.className='gallery-dot inline-flex size-2 rounded-full bg-slate-300 dark:bg-slate-600 transition-colors duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400'
          dot.setAttribute('aria-label',`Показать фото ${i+1}`)
          dot.setAttribute('aria-pressed','false')
          dot.tabIndex = -1
          dot.addEventListener('click',()=>{ setActive(i,{ focusDot: true }); startAuto() })
          dot.addEventListener('keydown',(event)=>{
            let targetIndex = null
            if(event.key==='ArrowRight' || event.key==='ArrowDown') targetIndex = (i + 1) % slides.length
            else if(event.key==='ArrowLeft' || event.key==='ArrowUp') targetIndex = (i - 1 + slides.length) % slides.length
            else if(event.key==='Home') targetIndex = 0
            else if(event.key==='End') targetIndex = slides.length - 1
            if(targetIndex!==null){
              event.preventDefault()
              setActive(targetIndex,{ focusDot: true })
              startAuto()
            }
          })
          dotsBox.appendChild(dot)
          dots.push(dot)
        })

        setActive(0)
        startAuto()

        const isDotFocused = () => dots.includes(document.activeElement)

        card.querySelector('.js-prev')?.addEventListener('click', ()=>{ prev({ focusDot: isDotFocused() }); startAuto() })
        card.querySelector('.js-next')?.addEventListener('click', ()=>{ next({ focusDot: isDotFocused() }); startAuto() })

        card.addEventListener('mouseenter', stopAuto)
        card.addEventListener('mouseleave', ()=>{
          if(!card.matches(':focus-within')) startAuto()
        })
        card.addEventListener('focusin', stopAuto)
        card.addEventListener('focusout', (event)=>{
          if(!card.contains(event.relatedTarget)) startAuto()
        })
      })
    }
    initGalleries()

    // ===== Поделиться ссылкой
    document.getElementById('shareLink')?.addEventListener('click', async ()=>{
      const url = window.location.href
      const title = document.title
      if(navigator.share){
        try {
          await navigator.share({ title, url })
        } catch (err) {
          if(err?.name !== 'AbortError') alert('Не удалось поделиться ссылкой. Попробуйте ещё раз.')
        }
        return
      }
      try {
        await navigator.clipboard.writeText(url)
        alert('Ссылка скопирована в буфер обмена')
      } catch (err) {
        prompt('Скопируйте ссылку вручную:', url)
      }
    })

    // Год в футере
    const y = new Date().getFullYear(); document.getElementById('y').textContent = y; document.getElementById('y2').textContent = y
  </script>

</body>
</html>
