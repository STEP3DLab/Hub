<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Никита Шахтёр — Официальный сайт</title>

  <!-- Resource Hints -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">

  <!-- Content Security Policy (CSP)
       Здесь для демонстрационных целей добавлены нужные домены и 'unsafe-inline'.
       В production рекомендуется заменить unsafe-inline на nonce или hash. -->
  <meta http-equiv="Content-Security-Policy" content="
      default-src 'self';
      script-src 'self' 'unsafe-inline' https://unpkg.com https://cdnjs.cloudflare.com https://www.googletagmanager.com;
      style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://unpkg.com;
      img-src 'self' data: https://via.placeholder.com https://259506.selcdn.ru https://upload.wikimedia.org;
      font-src 'self' https://fonts.gstatic.com;">

  <!-- Мета-теги для SEO и соцсетей -->
  <meta name="description" content="Произведения Никиты Шахтёра: стихи, рассказы, статьи, поэма '33', галерея, новости и донаты." />
  <meta property="og:title" content="Никита Шахтёр — Официальный сайт" />
  <meta property="og:description" content="Стихи, рассказы, статьи, поэма '33', галерея, новости и донаты от современного писателя." />
  <meta property="og:image" content="http://example.com/image.jpg" />
  <meta property="og:url" content="http://example.com" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Никита Шахтёр — Официальный сайт" />
  <meta name="twitter:description" content="Стихи, рассказы, статьи, поэма '33', галерея, новости и донаты от современного писателя." />
  <meta name="twitter:image" content="http://example.com/image.jpg" />

  <!-- Подключение шрифта Montserrat -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />

  <!-- Подключение Swiper (галерея) -->
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

  <!-- Основные стили и анимации -->
  <style>
    /* Основные переменные */
    :root {
      --primary-color: #333;
      --secondary-color: #fff;
      --accent-color: #007acc;
      --border-thickness: 1px;
      --transition-speed: 0.3s;
      --font-base: 'Montserrat', sans-serif;
    }
    /* Базовый сброс */
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html { scroll-behavior: smooth; }
    body {
      font-family: var(--font-base);
      font-size: 1rem;
      line-height: 1.6;
      background-color: var(--secondary-color);
      color: var(--primary-color);
      transition: background-color var(--transition-speed), color var(--transition-speed);
      padding: 1rem;
    }
    h1, h2, h3 {
      font-weight: 700;
      margin-bottom: 1.5rem;
      color: var(--primary-color);
    }
    /* Заголовки разделов */
    #featured h2,
    #poems h2,
    #stories h2,
    #articles h2,
    #gallery h2,
    #news h2 {
      font-size: 2rem;
    }
    p {
      margin-bottom: 1.5rem;
      font-size: 1rem;
      line-height: 1.8;
    }

    /* Ссылки и кнопки */
    a, button {
      text-decoration: none;
      font-family: var(--font-base);
      transition: background-color 0.2s, transform 0.2s, box-shadow 0.2s;
    }
    a:focus, button:focus, input:focus, textarea:focus {
      outline: 2px solid var(--accent-color);
      outline-offset: 0.2rem;
    }
    button, .toggle-content, .donate-button, .load-more {
      padding: 0.75rem 1.25rem;
      border: var(--border-thickness) solid var(--primary-color);
      background-color: var(--secondary-color);
      color: var(--primary-color);
      font-weight: 700;
      border-radius: 0.25rem;
      cursor: pointer;
      font-size: 1rem;
    }
    button:hover, .toggle-content:hover, .donate-button:hover, .load-more:hover {
      background-color: var(--accent-color);
      color: var(--secondary-color);
      box-shadow: 0 0.25rem 0.5rem rgba(0,0,0,0.15);
      transform: translateY(-0.125rem);
    }
    button:active {
      transform: scale(0.95);
      transition: transform 0.1s;
    }

    /* HEADER */
    header {
      position: sticky;
      top: 0;
      background-color: var(--secondary-color);
      border-bottom: 0.125rem solid #ddd;
      padding: 1.25rem 0.625rem;
      z-index: 10;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      transition: padding var(--transition-speed);
    }
    header.shrink { padding: 0.625rem 0.625rem; }
    .header-brand {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary-color);
    }
    /* Кнопка "Меню" */
    #menuButton {
      position: absolute;
      top: 0.5rem;
      right: 0.75rem;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      background-color: var(--secondary-color);
      color: var(--primary-color);
      border: 1px solid var(--primary-color);
      border-radius: 0.25rem;
      cursor: pointer;
      transition: background-color 0.2s, transform 0.2s;
    }
    #menuButton:hover {
      background-color: var(--accent-color);
      color: var(--secondary-color);
      transform: scale(1.05);
    }
    /* Кнопка переключения цветового режима (расположена ниже "Меню") */
    #colorModeToggle {
      position: absolute;
      top: 3rem;
      right: 0.75rem;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      background-color: transparent;
      color: var(--primary-color);
      border: 1px solid var(--primary-color);
      border-radius: 0.25rem;
      cursor: pointer;
      transition: background-color 0.2s, transform 0.2s;
    }
    #colorModeToggle:hover {
      background-color: var(--accent-color);
      color: var(--secondary-color);
      transform: scale(1.05);
    }

    /* Контейнер основного контента */
    main.container {
      max-width: 56.25rem;
      margin: 6.25rem auto 3.75rem;
      padding: 0 1.25rem;
    }
    section { margin-top: 2rem; margin-bottom: 2rem; }

    /* TOC и поисковая строка */
    .toc-search-container {
      display: flex;
      align-items: center;
      margin-bottom: 2rem;
    }
    /* "Содержание" сдвинуто вправо и с кнопкой раскрытия */
    #toc { margin-left: 1.5rem; }
    #tocExpand {
      margin-left: 0.5rem;
      font-size: 1.5rem;
      cursor: pointer;
      background: none;
      border: none;
      color: var(--primary-color);
    }
    #tocList {
      display: none;
      margin-top: 0.5rem;
      margin-left: 1.5rem;
      font-size: 0.9rem;
    }
    #tocList li { margin-bottom: 0.25rem; }
    #tocList li a { color: var(--primary-color); text-decoration: underline; }

    /* Поисковая строка – поле занимает всю ширину, кнопка очистки справа */
    #searchBar {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    #searchBar svg { width: 1.25rem; height: 1.25rem; }
    #searchBar input {
      flex: 1;
      padding: 0.5rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 0.25rem;
    }
    #searchBar button {
      font-size: 1.25rem;
      padding: 0.25rem 0.5rem;
      line-height: 1;
    }

    /* Кнопка "Наверх" */
    #backToTop {
      position: fixed;
      bottom: 1.25rem;
      right: 1.25rem;
      padding: 0.625rem 1.25rem;
      font-size: 1rem;
      border: 0.0625rem solid var(--primary-color);
      border-radius: 0.25rem;
      background-color: var(--secondary-color);
      color: var(--primary-color);
      cursor: pointer;
      display: none;
      transition: background-color 0.2s, transform 0.5s;
      z-index: 100;
    }
    #backToTop:hover, #backToTop:focus {
      background-color: var(--primary-color);
      color: var(--secondary-color);
    }
    #backToTop.scrolled-pulse { animation: pulse 1.5s infinite; }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    /* Модальное окно "Подробнее об авторе" */
    .modal {
      display: none;
      position: fixed;
      z-index: 1100;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.8);
      animation: fadeIn 0.5s;
    }
    .modal-content {
      background-color: var(--secondary-color);
      margin: 5% auto;
      padding: 1.25rem;
      border: 0.125rem solid var(--primary-color);
      border-radius: 0.5rem;
      width: 90%;
      max-width: 50rem;
      position: relative;
      box-shadow: 0 0.3125rem 0.9375rem rgba(0,0,0,0.5);
      animation: fadeIn 0.5s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    .fade-out { animation: fadeOut 0.5s forwards; }
    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }
    .modal-close {
      position: absolute;
      top: 0.625rem;
      right: 1.25rem;
      font-size: 2rem;
      cursor: pointer;
      transition: transform 0.3s;
      color: var(--primary-color);
    }
    .modal-close:hover, .modal-close:focus { transform: rotate(90deg); }

    /* Тёмная тема */
    body.dark {
      background-color: #121212;
      color: #e0e0e0;
    }
    body.dark header {
      background-color: #1a1a1a;
      border-bottom: 0.125rem solid #444;
    }
    body.dark a { color: #e0e0e0; }
    body.dark a:hover { background-color: #333; }
    body.dark .poem {
      background-color: #1e1e1e;
      border-color: #333;
      box-shadow: 0 0.125rem 0.375rem rgba(0,0,0,0.05);
    }
    body.dark .poem:hover,
    body.dark .poem:focus-within {
      box-shadow: 0 0.25rem 0.75rem rgba(255,255,255,0.1);
    }
    body.dark footer {
      background-color: #1a1a1a;
      border-top: 0.125rem solid #444;
    }

    /* Адаптивные изображения через <picture> */
    picture img {
      width: 100%;
      height: auto;
      display: block;
    }

    /* Скрытый контент */
    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      margin: -1px;
      border: 0;
      padding: 0;
      white-space: nowrap;
      clip-path: inset(100%);
      clip: rect(0 0 0 0);
      overflow: hidden;
    }

    /* Анимация появления новостей */
    .news-item {
      opacity: 0;
      transform: translateY(1.25rem);
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .news-item.animate {
      opacity: 1;
      transform: translateY(0);
    }

    /* Breadcrumbs */
    .breadcrumbs {
      font-size: 0.9rem;
      margin: 0.625rem 0;
    }
    .breadcrumbs ol {
      list-style: none;
      display: flex;
      gap: 0.3125rem;
    }
    .breadcrumbs li+li:before {
      content: '>';
      margin: 0 0.3125rem;
      color: #666;
    }

    /* Блок сборника (book-block) – с уменьшённой рамкой и новыми элементами */
    .book-block {
      border: 0.25px solid var(--accent-color); /* уменьшенная толщина рамки */
      border-radius: 0.5rem;
      padding: 1rem;
      width: 18.75rem;
      box-shadow: 0 0.125rem 0.375rem rgba(0,0,0,0.1);
      background-color: #fff;
      text-align: center;
      font-family: var(--font-base);
      position: relative;
    }
    /* Контейнер с тремя кнопками под верхней линией */
    .book-block .book-options {
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
      display: flex;
      justify-content: center;
      gap: 0.5rem;
    }
    .book-block .option-btn {
      padding: 0.5rem 1rem;
      border: var(--border-thickness) solid var(--primary-color);
      background-color: var(--secondary-color);
      color: var(--primary-color);
      font-size: 0.9rem;
      cursor: pointer;
      border-radius: 0.25rem;
      transition: background-color 0.2s, transform 0.2s;
    }
    .book-block .option-btn:hover {
      background-color: var(--accent-color);
      color: var(--secondary-color);
      transform: translateY(-0.125rem);
    }
    /* Контейнер с кнопкой "Читать" над нижней линией */
    .book-block .read-button-container {
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
    }
    .book-block .read-btn {
      padding: 0.75rem 1.25rem;
      border: var(--border-thickness) solid var(--primary-color);
      background-color: var(--secondary-color);
      color: var(--primary-color);
      font-size: 1rem;
      cursor: pointer;
      border-radius: 0.25rem;
      transition: background-color 0.2s, transform 0.2s;
    }
    .book-block .read-btn:hover {
      background-color: var(--accent-color);
      color: var(--secondary-color);
      transform: translateY(-0.125rem);
    }

    /* Блок "Прочее" – оставлен только блок сборника.
       В этом блоке вращающийся элемент "69" перемещён ближе к кнопке "Купить". */
    .extra-book-block {
      text-align: center;
      margin-top: 1rem;
      position: relative;
    }
    .extra-book-block .rotating-digits {
      position: absolute;
      left: -2rem;  /* уменьшенный отступ */
      top: 50%;
      transform: translateY(-50%);
      font-size: 6rem;
      font-weight: bold;
      color: var(--accent-color);
      animation: rotate 5s linear infinite;
      cursor: pointer;
    }
    .extra-book-block .rotating-digits:hover {
      animation: quickRotate 0.5s linear;
    }
    @keyframes rotate {
      from { transform: translateY(-50%) rotate(0deg); }
      to { transform: translateY(-50%) rotate(360deg); }
    }
    @keyframes quickRotate {
      from { transform: translateY(-50%) rotate(0deg); }
      to { transform: translateY(-50%) rotate(360deg); }
    }
    .extra-book-block p {
      margin: 0.5rem 0;
    }
    .extra-book-block .book-btn {
      padding: 0.5rem 1rem;
      font-size: 1rem;
    }

    /* Для первого стиха в "Поэзия": вместо служебных данных выводим текст стиха целиком */
    #poem1 .poem-title,
    #poem1 .poem-year,
    #poem1 .reading-time {
      display: none;
    }
    #poem1 .poem-text {
      font-size: 1.25rem;
      /* Здесь разместите полный текст стиха */
    }

    /* Для второго стиха удалены кнопка "Читать", блок текста и "Поделиться" */
    #poem2 .toggle-content,
    #poem2 .poem-text,
    #poem2 .share {
      display: none;
    }

    /* Блок "Поэма '33'" для первого стиха */
    #poem1 .logo-circle {
      width: 20rem;
      height: 20rem;
      border: calc(1px / 3) solid var(--primary-color);
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin-left: auto;
      position: relative;
    }
    #poem1 .logo-circle > div:first-child {
      font-size: 6rem;
      font-weight: bold;
    }
    #poem1 .logo-circle .inner-read-btn {
      font-size: 2.5rem;
      margin-top: 0.5rem;
      padding: 0.5rem 1rem;
    }
    /* Треугольные стрелочки внутри блока "Поэма '33'" */
    .logo-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-size: 2rem;
      color: #000;
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.25rem;
      transition: transform 0.2s;
    }
    .logo-arrow:hover { transform: translateY(-50%) scale(1.1); }
    .logo-arrow.left { left: -2rem; }
    .logo-arrow.right { right: -2rem; }

    /* Футер */
    footer {
      background-color: #f3f3f3;
      padding: 1rem 0;
      text-align: center;
      font-size: 0.9rem;
      border-top: 1px solid #ddd;
    }
    footer nav {
      display: flex;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
      margin-bottom: 0.5rem;
    }
    footer nav a {
      color: var(--primary-color);
      text-decoration: none;
      transition: color 0.2s;
    }
    footer nav a:hover { color: var(--accent-color); }
    footer p { margin: 0.5rem 0 0; }

    /* Media queries для мобильных устройств */
    @media (max-width: 600px) {
      header { flex-direction: column; align-items: flex-start; }
      #colorModeToggle { position: static; margin-top: 0.5rem; }
      .toc-search-container { flex-direction: column; gap: 1rem; }
    }
  </style>

  <!-- Структурированные данные (JSON‑LD) для SEO -->
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Person",
    "name": "Никита Шахтёр",
    "url": "http://example.com",
    "sameAs": [
      "https://facebook.com/yourprofile",
      "https://twitter.com/yourprofile"
    ],
    "jobTitle": "Писатель",
    "birthDate": "1989-01-01",
    "birthPlace": "Москва, Россия"
  }
  </script>
</head>
<body>
  <!-- ARIA live для уведомлений -->
  <div id="notification" class="visually-hidden" aria-live="polite"></div>

  <!-- Breadcrumbs -->
  <nav aria-label="Хлебные крошки" class="breadcrumbs">
    <ol>
      <li><a href="/">Главная</a></li>
      <li aria-current="page">Поэзия</li>
    </ol>
  </nav>

  <!-- Выдвижная панель -->
  <div id="slidePanel" class="slide-panel">Дополнительные настройки и информация</div>

  <a href="#mainContent" class="skip-link">Перейти к содержимому</a>

  <!-- Прогресс-бар -->
  <div id="progressBarContainer">
    <div id="progressBar"></div>
  </div>

  <!-- HEADER -->
  <header id="pageHeader">
    <div class="header-brand">Никита Шахтёр</div>
    <!-- Кнопка "Меню" -->
    <button id="menuButton" aria-label="Меню">Меню</button>
    <!-- Кнопка переключения цвета -->
    <button id="colorModeToggle" style="position: absolute; top: 3rem; right: 0.75rem;" aria-label="Переключить режим">Переключить режим</button>
  </header>

  <!-- Мобильное меню (при необходимости) -->
  <div class="mobile-menu-overlay" id="mobileMenuOverlay" onclick="closeMobileMenu()"></div>
  <div class="mobile-menu" id="mobileMenu">
    <!-- Мобильное меню можно добавить при необходимости -->
  </div>

  <!-- TOC и поисковая строка -->
  <div class="toc-search-container">
    <section id="toc">
      <h2>Содержание <button id="tocExpand" aria-label="Раскрыть содержимое">+</button></h2>
      <ul id="tocList">
        <li><a href="#poems">Поэзия</a></li>
        <li><a href="#stories">Проза</a></li>
        <li><a href="#articles">Блог "Н.Э.Ш."</a></li>
        <li><a href="#gallery">Прочее</a></li>
        <li><a href="#news">Партнер проекта</a></li>
      </ul>
    </section>
    <div id="searchBar">
      <svg xmlns="http://www.w3.org/2000/svg" width="1.25rem" height="1.25rem" fill="currentColor" viewBox="0 0 16 16">
        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85zm-5.242.656a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/>
      </svg>
      <input type="text" id="searchInput" placeholder="Поиск" aria-label="Поиск" />
      <button id="clearSearch" aria-label="Очистить поиск">×</button>
    </div>
  </div>

  <!-- Основной контент -->
  <main class="container" id="mainContent" role="main" aria-live="polite">
    <!-- Секция "О проекте" -->
    <section id="featured">
      <h2>О проекте</h2>
      <p class="project-desc">
        Проект «Никита Шахтёр — Официальный сайт» создан для того, чтобы познакомить вас с творчеством современного писателя, чьи произведения отражают искренность, глубокие переживания и особый взгляд на жизнь. Здесь собраны стихи, рассказы и статьи, каждая из которых несёт в себе частичку души автора.
      </p>
      <p class="project-desc">
        Цель проекта – не только демонстрация литературных работ, но и создание пространства для общения с читателями, обмена идеями и вдохновения. Сайт предлагает удобную навигацию по различным жанрам, позволяя легко находить интересующий контент и следить за новостями.
      </p>
      <button id="aboutProjectToggle" class="toggle-content">Подробнее</button>
      <div id="aboutProjectExtra" style="display: none; margin-top: 1rem;">
        <p>
          Никита Шахтёр — современный московский писатель, родившийся в СССР в 1989 году. Его творчество охватывает поэзию, прозу и статьи. Завершив обучение по специальности инженер-механик, он нашёл своё призвание в литературе, сумев передать глубокие переживания и искренние эмоции.
        </p>
        <p>
          Творчество включает 7 рассказов и один роман, а его стихи и проза находят отклик у широкой аудитории. Сайт создан как место общения и вдохновения для читателей.
        </p>
      </div>
    </section>

    <!-- Секция "Поэзия" -->
    <section id="poems">
      <h2>Поэзия</h2>
      <!-- Первый стих: вместо служебных строк выводим полный текст стиха -->
      <article class="poem" id="poem1">
        <div class="poem-text">
          Здесь размещается полный текст стиха, который будет отображаться целиком без служебных данных.
        </div>
        <!-- Блок "Поэма '33'" с треугольными стрелками для переключения содержимого -->
        <div class="logo-circle" aria-label="Блок поэмы" role="group">
          <div>Поэма "33"</div>
          <button class="inner-read-btn">Читать</button>
          <button class="logo-arrow left" aria-label="Предыдущий вариант">&#9664;</button>
          <button class="logo-arrow right" aria-label="Следующий вариант">&#9654;</button>
        </div>
      </article>

      <!-- Второй стих: удалены кнопка "Читать", блок с текстом и "Поделиться" -->
      <article class="poem" id="poem2">
        <div class="poem-title">Микропоэма «Чугунные люки»</div>
        <div class="poem-year">2018 год, Ховрино (Москва)</div>
        <div class="reading-time">Время чтения: ~30 сек</div>
        <div class="logo-circle">
          <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
            <rect x="10" y="10" width="44" height="44" stroke="black" stroke-width="4" fill="white" />
          </svg>
        </div>
      </article>
    </section>

    <!-- Секция "Проза" -->
    <section id="stories">
      <h2>Проза</h2>
      <article class="story">
        <div class="story-logo">Проза</div>
        <h3 class="story-title">Повесть о программисте</h3>
        <button class="story-read-button" id="storyProgrammer">Читать</button>
      </article>
    </section>

    <!-- Секция "Поэтический сборник '69+1'" с виджетом доната и дополнительными элементами -->
    <section id="collection">
      <div class="collection-container" style="display: flex; align-items: center; gap: 1rem;">
        <!-- Виджет доната -->
        <div class="donation-widget">
          <button class="donation-decrease">–</button>
          <div class="donation-circle">
            <span class="donation-amount">500</span>
            <div class="donation-label">Задонатить</div>
          </div>
          <button class="donation-increase">+</button>
          <div class="donation-currency">рублей</div>
        </div>
        <!-- Прямоугольник сборника с дополнительными элементами -->
        <div style="position: relative; display: inline-block;">
          <button id="collectionPrev" style="position: absolute; left: -2rem; top: 50%; transform: translateY(-50%); border: none; background: none; font-size: 2rem; cursor: pointer;">&#9664;</button>
          <div class="book-block" id="bookBlock">
            <!-- Верхняя часть: Заголовок и блок с тремя кнопками -->
            <div class="book-header">
              <h3 class="book-title">Поэтический сборник "69+1"</h3>
            </div>
            <!-- Блок с кнопками под верхней линией -->
            <div class="book-options">
              <button class="option-btn">Проза</button>
              <button class="option-btn">Стихи</button>
              <button class="option-btn">Статьи</button>
            </div>
            <!-- Блок с кнопкой "Читать" над нижней линией -->
            <div class="read-button-container">
              <button class="read-btn">Читать</button>
            </div>
            <div class="book-action">
              <button class="book-btn">Купить</button>
            </div>
            <div class="book-price">2 970 рублей</div>
            <hr class="divider">
            <div class="announcement-header">
              <h4 class="announcement-title">
                Сделай мир лучше! Пожертвуй <span id="donationText">500</span> рублей на развитие проекта. Внеси свой вклад в развитие отечественной литературы!
              </h4>
            </div>
            <div class="announcement-action">
              <button class="announcement-btn">Оплатить</button>
            </div>
          </div>
          <button id="collectionNext" style="position: absolute; right: -2rem; top: 50%; transform: translateY(-50%); border: none; background: none; font-size: 2rem; cursor: pointer;">&#9654;</button>
        </div>
      </div>
    </section>

    <!-- Секция "Блог 'Н.Э.Ш.'" -->
    <section id="articles">
      <h2>Блог "Н.Э.Ш."</h2>
      <article class="article-item">
        <div class="article-logo">ТОП 50</div>
        <h3 class="article-title">ТОП 50 книг всех времен и народов</h3>
        <button class="article-read-button">Читать</button>
      </article>
    </section>

    <!-- Секция "Прочее" – оставлен только блок сборника -->
    <section id="gallery">
      <h2>Прочее</h2>
      <div class="extra-book-block">
        <!-- Вращающийся элемент "69" перемещён ближе к тексту сборника -->
        <div class="rotating-digits" aria-label="Вращающиеся цифры">69</div>
        <div style="display: inline-block; vertical-align: middle;">
          <p style="font-weight: bold; font-size: 1.125rem;">Поэтический сборник "69+1"</p>
          <p><button class="book-btn" style="padding: 0.5rem 1rem; font-size: 1rem;">Купить</button></p>
          <p style="font-size: 1rem; font-weight: bold;">2 970 рублей</p>
        </div>
      </div>
    </section>

    <!-- Секция "Партнер проекта" -->
    <section id="news">
      <h2>Партнер проекта</h2>
      <div id="newsContainer">
        <!-- Динамически загружаемые новости -->
      </div>
      <div id="newsLoader" class="loader"></div>
      <div class="partner-links" style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin-top: 1rem;">
        <a href="https://t.me/STEP_3D_Lab" target="_blank">
          <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram" style="width: 2rem; height: 2rem;" loading="lazy">
        </a>
        <button id="loadMoreBtn" class="load-more">Перейти на сайт</button>
        <a href="#">
          <img src="https://259506.selcdn.ru/sites-static/site953902/096387b6-44c2-437d-90cd-16d7fd61076e/096387b6-44c2-437d-90cd-16d7fd61076e-10592150.png" alt="Логотип" style="width: 2rem; height: 2rem;" loading="lazy">
        </a>
      </div>
      <p style="font-size: 1rem; text-align: center; margin-top: 1rem;">
        Step3D - AI-сервис для заказа 3D-услуг (моделирование, сканирование, печать)
      </p>
    </section>

    <!-- Секция "Донаты" -->
    <section id="donates">
      <h3 style="font-size: 1.5rem; color: #000;">Поддержите автора!</h3>
      <button class="donate-button">Сделайте вклад</button>
    </section>

    <p>© 1989-2025 Никита Шахтёр.</p>
  </main>

  <!-- Модальное окно "Подробнее об авторе" -->
  <div id="aboutModal" class="modal" role="dialog" aria-labelledby="aboutModalTitle">
    <div class="modal-content">
      <span id="aboutModalClose" class="modal-close" tabindex="0" aria-label="Закрыть">&times;</span>
      <div id="aboutModalText">
        <p>Никита Шахтёр — современный московский писатель. Родился в СССР, 1989 год.</p>
        <p>Образование — инженер-механик. Завершив аспирантуру, увлёкся коммерческой недвижимостью.</p>
        <p>Творчество включает 7 рассказов и один роман:</p>
        <ul>
          <li>Повесть о программисте</li>
          <li>Совхоз имени В.И. Ленина</li>
          <li>Фирма веников не вяжет</li>
          <li>Маша</li>
          <li>Шахматный этюд</li>
          <li>Уроки моделирования</li>
          <li>За DVD</li>
        </ul>
        <p>Роман “Za деньги”</p>
        <p>После завершения всех проектов, Никита поклялся больше не писать художественный текст.</p>
      </div>
    </div>
  </div>

  <footer id="contacts">
    <nav>
      <a href="#">Политика</a>
      <a href="#">Оферта</a>
      <a href="#">Согласие на обработку персональных данных</a>
      <a href="#">ТОП 50 Фильмов</a>
      <a href="#">ТОП 50 Книг</a>
      <a href="#">Step3D.tech</a>
    </nav>
    <p>
      По вопросам сотрудничества:<br>
      Email: <a href="mailto:example@example.com">example@example.com</a>
    </p>
  </footer>

  <button id="backToTop" aria-label="Наверх">Наверх</button>

  <!-- Подключение Swiper и GSAP -->
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js" defer></script>

  <!-- Основной скрипт -->
  <script defer>
    // Переключение цветового режима
    const colorModeToggle = document.getElementById('colorModeToggle');
    colorModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      alert(document.body.classList.contains('dark') ? 'Тёмный режим активирован' : 'Светлый режим активирован');
    });

    // Кнопка "Меню"
    const menuButton = document.getElementById('menuButton');
    menuButton.addEventListener('click', () => {
      alert('Меню открыто (здесь можно разместить навигацию)');
    });

    // Кнопка "Наверх"
    const backToTopBtn = document.getElementById('backToTop');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) {
        backToTopBtn.style.display = 'block';
        document.body.classList.add('scrolled');
        backToTopBtn.classList.add('scrolled-pulse');
      } else {
        backToTopBtn.style.display = 'none';
        document.body.classList.remove('scrolled');
        backToTopBtn.classList.remove('scrolled-pulse');
      }
      const header = document.getElementById('pageHeader');
      if (window.scrollY > 100) header.classList.add('shrink');
      else header.classList.remove('shrink');
      const scrollTop = window.scrollY;
      const docHeight = document.body.scrollHeight - window.innerHeight;
      const scrollPercent = (scrollTop / docHeight) * 100;
      document.getElementById('progressBar').style.width = scrollPercent + '%';
    });
    backToTopBtn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Поисковая строка
    const searchInput = document.getElementById('searchInput');
    const clearSearchBtn = document.getElementById('clearSearch');
    const poems = document.querySelectorAll('.poem');
    searchInput.addEventListener('input', () => {
      const query = searchInput.value.toLowerCase();
      poems.forEach(poem => {
        const text = poem.innerText.toLowerCase();
        poem.style.display = text.includes(query) ? 'block' : 'none';
      });
    });
    clearSearchBtn.addEventListener('click', () => {
      searchInput.value = '';
      poems.forEach(poem => poem.style.display = 'block');
    });

    // Раскрытие блока "Подробнее" в "О проекте"
    const aboutProjectToggle = document.getElementById('aboutProjectToggle');
    const aboutProjectExtra = document.getElementById('aboutProjectExtra');
    if (aboutProjectToggle) {
      aboutProjectToggle.addEventListener('click', () => {
        if (aboutProjectExtra.style.display === "none") {
          aboutProjectExtra.style.display = "block";
          aboutProjectToggle.textContent = "Свернуть";
        } else {
          aboutProjectExtra.style.display = "none";
          aboutProjectToggle.textContent = "Подробнее";
        }
      });
    }

    // Виджет доната
    const donationDecrease = document.querySelector('.donation-decrease');
    const donationIncrease = document.querySelector('.donation-increase');
    const donationAmountElem = document.querySelector('.donation-amount');
    const donationTextElem = document.getElementById('donationText');
    let donationAmount = 500;
    donationDecrease.addEventListener('click', () => {
      donationAmount = Math.max(100, donationAmount - 100);
      donationAmountElem.textContent = donationAmount;
      donationTextElem.textContent = donationAmount;
    });
    donationIncrease.addEventListener('click', () => {
      donationAmount += 100;
      donationAmountElem.textContent = donationAmount;
      donationTextElem.textContent = donationAmount;
    });

    // Переключение информации в блоке сборника
    const collectionItems = [
      {
        title: 'Поэтический сборник "69+1"',
        btnText: 'Купить',
        price: '2 970 рублей',
        announcement: 'Сделай мир лучше! Пожертвуй <span id="donationText">' + donationAmount + '</span> рублей на развитие проекта. Внеси свой вклад в развитие отечественной литературы!'
      },
      {
        title: 'Поэтический сборник "70+1"',
        btnText: 'Купить',
        price: '3 500 рублей',
        announcement: 'Новый сборник! Пожертвуй <span id="donationText">' + donationAmount + '</span> рублей и поддержи развитие отечественной литературы!'
      }
    ];
    let currentCollectionIndex = 0;
    const bookBlock = document.getElementById('bookBlock');
    const collectionPrev = document.getElementById('collectionPrev');
    const collectionNext = document.getElementById('collectionNext');
    function updateCollection() {
      const item = collectionItems[currentCollectionIndex];
      document.querySelector('#bookBlock .book-title').textContent = item.title;
      document.querySelector('#bookBlock .book-btn').textContent = item.btnText;
      document.querySelector('#bookBlock .book-price').textContent = item.price;
      document.querySelector('#bookBlock .announcement-title').innerHTML = item.announcement;
    }
    if (collectionPrev && collectionNext) {
      collectionPrev.addEventListener('click', () => {
        currentCollectionIndex = (currentCollectionIndex - 1 + collectionItems.length) % collectionItems.length;
        updateCollection();
      });
      collectionNext.addEventListener('click', () => {
        currentCollectionIndex = (currentCollectionIndex + 1) % collectionItems.length;
        updateCollection();
      });
    }

    // Раскрытие древовидного списка в TOC
    const tocExpand = document.getElementById('tocExpand');
    const tocList = document.getElementById('tocList');
    tocExpand.addEventListener('click', () => {
      if (tocList.style.display === 'none' || tocList.style.display === '') {
        tocList.style.display = 'block';
        tocExpand.textContent = '–';
      } else {
        tocList.style.display = 'none';
        tocExpand.textContent = '+';
      }
    });

    // Динамическая загрузка новостей
    let newsData = [
      { title: "Пост 1 из STEP_3D_Lab", date: "01.04.2023", excerpt: "Описание поста 1...", link: "#" },
      { title: "Пост 2 из STEP_3D_Lab", date: "02.04.2023", excerpt: "Описание поста 2...", link: "#" },
      { title: "Пост 3 из STEP_3D_Lab", date: "03.04.2023", excerpt: "Описание поста 3...", link: "#" },
      { title: "Пост 4 из STEP_3D_Lab", date: "04.04.2023", excerpt: "Описание поста 4...", link: "#" },
      { title: "Пост 5 из STEP_3D_Lab", date: "05.04.2023", excerpt: "Описание поста 5...", link: "#" }
    ];
    let newsIndex = 0;
    const newsBatchSize = 3;
    function loadMoreNews() {
      const newsContainer = document.getElementById('newsContainer');
      const loader = document.getElementById('newsLoader');
      loader.style.display = 'block';
      setTimeout(() => {
        for (let i = newsIndex; i < newsIndex + newsBatchSize && i < newsData.length; i++) {
          const item = newsData[i];
          const article = document.createElement('article');
          article.classList.add('news-item');
          article.innerHTML = `
            <h3>${item.title}</h3>
            <p style="font-size: 0.9rem; color: #666;">${item.date}</p>
            <p>${item.excerpt}</p>
            <a href="${item.link}">Читать подробнее</a>
          `;
          newsContainer.appendChild(article);
        }
        newsIndex += newsBatchSize;
        loader.style.display = 'none';
        if (newsIndex >= newsData.length) {
          document.getElementById('loadMoreBtn').style.display = 'none';
        }
      }, 1000);
    }
    window.addEventListener('DOMContentLoaded', loadMoreNews);
    document.getElementById('loadMoreBtn').addEventListener('click', loadMoreNews);

    // Инициализация Swiper
    window.addEventListener('DOMContentLoaded', () => {
      new Swiper('.swiper-container', {
        loop: true,
        navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
        autoplay: { delay: 3000, disableOnInteraction: false },
        lazy: true
      });
    });

    // Регистрация Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then(registration => console.log('Service Worker зарегистрирован с scope:', registration.scope))
          .catch(error => console.error('Ошибка регистрации Service Worker:', error));
      });
    }

    // Push-уведомления (пример)
    if ('Notification' in window && 'serviceWorker' in navigator) {
      Notification.requestPermission().then(permission => {
        if (permission === 'granted') {
          navigator.serviceWorker.ready.then(registration => {
            const vapidPublicKey = '<YOUR_PUBLIC_VAPID_KEY>';
            const convertedVapidKey = urlBase64ToUint8Array(vapidPublicKey);
            registration.pushManager.subscribe({
              userVisibleOnly: true,
              applicationServerKey: convertedVapidKey
            }).then(subscription => {
              console.log('Пользователь подписан на уведомления:', subscription);
            }).catch(error => { console.error('Ошибка подписки:', error); });
          });
        }
      });
    }
    function urlBase64ToUint8Array(base64String) {
      const padding = '='.repeat((4 - base64String.length % 4) % 4);
      const base64 = (base64String + padding).replace(/\-/g, '+').replace(/_/g, '/');
      const rawData = atob(base64);
      return Uint8Array.from([...rawData].map(char => char.charCodeAt(0)));
    }

    // Переключение вариантов внутри блока "Поэма '33'".
    // При нажатии стрелочек содержимое меняется с анимацией поворота шара на "Стихи" или "Проза"
    const innerLeftArrow = document.querySelector('#poem1 .logo-arrow.left');
    const innerRightArrow = document.querySelector('#poem1 .logo-arrow.right');
    const innerContent = document.querySelector('#poem1 .logo-circle > div:first-child');
    const innerVariants = ["Стихи", "Проза"];
    let innerIndex = 0;
    function updateInnerContent() {
      if (typeof gsap !== 'undefined') {
        gsap.to(innerContent, { duration: 0.5, rotationY: "+=360", onComplete: () => {
          innerContent.textContent = innerVariants[innerIndex];
        }});
      } else {
        innerContent.textContent = innerVariants[innerIndex];
      }
    }
    if (innerLeftArrow && innerRightArrow) {
      innerLeftArrow.addEventListener('click', () => {
        innerIndex = (innerIndex - 1 + innerVariants.length) % innerVariants.length;
        updateInnerContent();
      });
      innerRightArrow.addEventListener('click', () => {
        innerIndex = (innerIndex + 1) % innerVariants.length;
        updateInnerContent();
      });
    }
  </script>
</body>
</html>
